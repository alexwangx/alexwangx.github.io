<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Spark 2.4.4 架构原理</title>
    <link rel="canonical" href="http://alexwangx.github.io/apache-spark-internals/2.4.4/apache-spark-internals/2.4.4/spark-scheduler-TaskSchedulerImpl.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-86782445-1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-86782445-1')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="http://alexwangx.github.io/apache-spark-internals/2.4.4">Spark 2.4.4 架构原理</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="apache-spark-internals" data-version="2.4.4">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Apache Spark</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spark-overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Block Storage System</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-BlockDataManager.html">BlockDataManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-BlockId.html">BlockId</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-ManagedBuffer.html">ManagedBuffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-BlockManager.html">BlockManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-MemoryStore.html">MemoryStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-BlockEvictionHandler.html">BlockEvictionHandler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-StorageMemoryPool.html">StorageMemoryPool</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-MemoryPool.html">MemoryPool</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-DiskStore.html">DiskStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-RpcHandler.html">RpcHandler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-RpcResponseCallback.html">RpcResponseCallback</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-TransportRequestHandler.html">TransportRequestHandler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-TransportContext.html">TransportContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-TransportServer.html">TransportServer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-TransportClientFactory.html">TransportClientFactory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-MessageHandler.html">MessageHandler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-BlockManagerMaster.html">BlockManagerMaster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-blockmanager-BlockManagerMasterEndpoint.html">BlockManagerMasterEndpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-DiskBlockManager.html">DiskBlockManager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-BlockInfoManager.html">BlockInfoManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-BlockInfo.html">BlockInfo</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-blockmanager-BlockManagerSlaveEndpoint.html">BlockManagerSlaveEndpoint</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-blockmanager-DiskBlockObjectWriter.html">DiskBlockObjectWriter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-BlockManager-BlockManagerSource.html">BlockManagerSource</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-BlockManager-ShuffleMetricsSource.html">ShuffleMetricsSource</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-blockmanager-StorageStatus.html">StorageStatus</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transferring Data Blocks (between Nodes in Spark Application)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-ShuffleClient.html">ShuffleClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-BlockTransferService.html">BlockTransferService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-ShuffleClient-ExternalShuffleClient.html">ExternalShuffleClient</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-NettyBlockTransferService.html">NettyBlockTransferService</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-NettyBlockRpcServer.html">NettyBlockRpcServer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-BlockFetchingListener.html">BlockFetchingListener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-RetryingBlockFetcher.html">RetryingBlockFetcher</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-RetryingBlockFetcher-BlockFetchStarter.html">BlockFetchStarter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Shuffle System</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-shuffle-ShuffleManager.html">ShuffleManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-shuffle-ShuffleBlockResolver.html">ShuffleBlockResolver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-shuffle-SortShuffleManager.html">SortShuffleManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-IndexShuffleBlockResolver.html">IndexShuffleBlockResolver</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-shuffle-ShuffleHandle.html">ShuffleHandle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-BaseShuffleHandle.html">BaseShuffleHandle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-BypassMergeSortShuffleHandle.html">BypassMergeSortShuffleHandle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-SerializedShuffleHandle.html">SerializedShuffleHandle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-shuffle-ShuffleWriter.html">ShuffleWriter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-BypassMergeSortShuffleWriter.html">BypassMergeSortShuffleWriter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-SortShuffleWriter.html">SortShuffleWriter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-UnsafeShuffleWriter.html">UnsafeShuffleWriter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-shuffle-ShuffleReader.html">ShuffleReader</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-shuffle-BlockStoreShuffleReader.html">BlockStoreShuffleReader</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-shuffle-ShuffleExternalSorter.html">ShuffleExternalSorter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-shuffle-ShuffleInMemorySorter.html">ShuffleInMemorySorter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-architecture.html">Spark Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-driver.html">Driver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-Executor.html">Executor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-Executor-TaskRunner.html">TaskRunner</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-executor-ExecutorSource.html">ExecutorSource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-master.html">Master</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-workers.html">Workers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-SparkConf.html">SparkConf</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-properties.html">Spark Properties and spark-defaults.conf Properties File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-deploy-mode.html">Deploy Mode</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-SparkContext.html">SparkContext</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-HeartbeatReceiver.html">HeartbeatReceiver RPC Endpoint</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkContext-creating-instance-internals.html">Inside Creating SparkContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-sparkcontext-ConsoleProgressBar.html">ConsoleProgressBar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-sparkcontext-SparkStatusTracker.html">SparkStatusTracker</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-sparkcontext-local-properties.html">Local Properties</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spark-execution-model.html">Execution Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spark-configuration-properties.html">Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spark-anatomy-spark-application.html">Anatomy of Spark Application</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd.html">RDD</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-rdd-RDD.html">RDD API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd-operations.html">Operators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd-transformations.html">Transformations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-rdd-PairRDDFunctions.html">PairRDDFunctions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-actions.html">Actions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-rdd-lineage.html">RDD Lineage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd-caching.html">Caching and Persistence</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-StorageLevel.html">StorageLevel</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd-checkpointing.html">Checkpointing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-CheckpointRDD.html">CheckpointRDD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd-partitions.html">Partitions and Partitioning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-Partition.html">Partition</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-Partitioner.html">Partitioner</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-HashPartitioner.html">HashPartitioner</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-rdd-shuffle.html">Shuffling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rdd-Dependency.html">RDD Dependencies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-NarrowDependency.html">NarrowDependency</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-ShuffleDependency.html">ShuffleDependency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-Aggregator.html">Map/Reduce-side Aggregator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Specialized RDDs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-ParallelCollectionRDD.html">ParallelCollectionRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-MapPartitionsRDD.html">MapPartitionsRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-OrderedRDDFunctions.html">OrderedRDDFunctions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-CoGroupedRDD.html">CoGroupedRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-SubtractedRDD.html">SubtractedRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-HadoopRDD.html">HadoopRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-NewHadoopRDD.html">NewHadoopRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rdd-ShuffledRDD.html">ShuffledRDD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-TaskLocation.html">TaskLocation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-internal-io-SparkHadoopWriter.html">SparkHadoopWriter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-internal-io-FileCommitProtocol.html">FileCommitProtocol</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-internal-io-HadoopMapReduceCommitProtocol.html">HadoopMapReduceCommitProtocol</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-internal-io-HadoopMapRedCommitProtocol.html">HadoopMapRedCommitProtocol</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-internal-io-HadoopWriteConfigUtil.html">HadoopWriteConfigUtil</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-internal-io-HadoopMapReduceWriteConfigUtil.html">HadoopMapReduceWriteConfigUtil</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-internal-io-HadoopMapRedWriteConfigUtil.html">HadoopMapRedWriteConfigUtil</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-core-AppStatusStore.html">AppStatusStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-core-AppStatusPlugin.html">AppStatusPlugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-core-KVStore.html">KVStore</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-core-KVStoreView.html">KVStoreView</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-core-ElementTrackingStore.html">ElementTrackingStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-core-InMemoryStore.html">InMemoryStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-core-LevelDB.html">LevelDB</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-InterruptibleIterator.html">InterruptibleIterator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-barrier-execution-mode.html">Barrier Execution Mode</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-RDDBarrier.html">RDDBarrier</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Shared Variables</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-broadcast.html">Broadcast variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-accumulators.html">Accumulators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-AccumulatorContext.html">AccumulatorContext</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-shell.html">Spark Shell (spark-shell)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-submit.html">Spark Submit (spark-submit)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-submit-SparkSubmitArguments.html">SparkSubmitArguments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-submit-SparkSubmitOptionParser.html">SparkSubmitOptionParser</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-submit-SparkSubmitCommandBuilder.html">SparkSubmitCommandBuilder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-class.html">spark-class shell script</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-AbstractCommandBuilder.html">AbstractCommandBuilder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-SparkLauncher.html">SparkLauncher</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Low-Level Spark Task Scheduler</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-ActiveJob.html">Jobs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-SchedulableBuilder.html">SchedulableBuilder</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-FIFOSchedulableBuilder.html">FIFOSchedulableBuilder</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-FairSchedulableBuilder.html">FairSchedulableBuilder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-TaskScheduler.html">TaskScheduler</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="spark-scheduler-TaskSchedulerImpl.html">TaskSchedulerImpl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-Task.html">Task</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-ShuffleMapTask.html">ShuffleMapTask</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-ResultTask.html">ResultTask</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskSet.html">TaskSet</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskSetManager.html">TaskSetManager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-Schedulable.html">Schedulable Entities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-Pool.html">Schedulable Pool</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-SchedulingMode.html">Scheduling Mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskInfo.html">TaskInfo</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-TaskRunner-FetchFailedException.html">FetchFailedException</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-MapStatus.html">MapStatus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskDescription.html">TaskDescription</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-taskschedulerimpl-speculative-execution.html">Speculative Execution of Tasks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskResultGetter.html">TaskResultGetter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-TaskContext.html">TaskContext</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-BarrierTaskContext.html">BarrierTaskContext</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-TaskContextImpl.html">TaskContextImpl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskResult.html">TaskResults</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-TaskSetBlacklist.html">TaskSetBlacklist</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">High-Level Spark Stage Scheduler</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-DAGScheduler.html">DAGScheduler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-Stage.html">Stage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-ShuffleMapStage.html">ShuffleMapStage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-ResultStage.html">ResultStage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-StageInfo.html">StageInfo</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-scheduler-DAGSchedulerEventProcessLoop.html">DAGScheduler Event Bus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-JobListener.html">JobListener</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-scheduler-JobWaiter.html">JobWaiter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-memory-unified-memory-management.html">Unified Memory Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-memory-TaskMemoryManager.html">TaskMemoryManager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-memory-MemoryConsumer.html">MemoryConsumer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-MemoryManager.html">MemoryManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-UnifiedMemoryManager.html">UnifiedMemoryManager</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-StaticMemoryManager.html">StaticMemoryManager</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-MemoryManager-properties.html">MemoryManager Configuration Properties</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-SerializerManager.html">SerializerManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-SparkEnv.html">SparkEnv</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-SchedulerBackend.html">SchedulerBackend</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-CoarseGrainedSchedulerBackend.html">CoarseGrainedSchedulerBackend</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-CoarseGrainedSchedulerBackend-DriverEndpoint.html">DriverEndpoint</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-ExecutorBackend.html">ExecutorBackend</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-CoarseGrainedExecutorBackend.html">CoarseGrainedExecutorBackend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-ExternalShuffleService.html">ExternalShuffleService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-OneForOneStreamManager.html">OneForOneStreamManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-ShuffleBlockFetcherIterator.html">ShuffleBlockFetcherIterator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-ExternalSorter.html">ExternalSorter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-service-mapoutputtracker.html">MapOutputTracker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-service-MapOutputTrackerMaster.html">MapOutputTrackerMaster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-service-MapOutputTrackerMasterEndpoint.html">MapOutputTrackerMasterEndpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-service-MapOutputTrackerWorker.html">MapOutputTrackerWorker</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-serialization.html">Serialization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-Serializer.html">Serializer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SerializerInstance.html">SerializerInstance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SerializationStream.html">SerializationStream</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-DeserializationStream.html">DeserializationStream</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-ExternalClusterManager.html">ExternalClusterManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-service-broadcastmanager.html">BroadcastManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-BroadcastFactory.html">BroadcastFactory</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-TorrentBroadcastFactory.html">TorrentBroadcastFactory</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-TorrentBroadcast.html">TorrentBroadcast</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-CompressionCodec.html">CompressionCodec</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-service-contextcleaner.html">ContextCleaner</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-CleanerListener.html">CleanerListener</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-dynamic-allocation.html">Dynamic Allocation (of Executors)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-ExecutorAllocationManager.html">ExecutorAllocationManager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-service-ExecutorAllocationClient.html">ExecutorAllocationClient</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-service-ExecutorAllocationManagerSource.html">ExecutorAllocationManagerSource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-http-file-server.html">HTTP File Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-data-locality.html">Data Locality</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-cachemanager.html">Cache Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-service-outputcommitcoordinator.html">OutputCommitCoordinator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-rpc.html">RPC Environment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rpc-RpcEnv.html">RpcEnv</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rpc-RpcEndpoint.html">RpcEndpoint</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-RpcEndpointRef.html">RpcEndpointRef</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-RpcEnvFactory.html">RpcEnvFactory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-rpc-netty.html">Netty-based RpcEnv</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-TransportConf.html">TransportConf</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-Utils.html">Utils Helper Object</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-webui-security.html">Securing Web UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-deployment-environments.html">Deployment Environments</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-cluster.html">Spark on cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-history-server.html">Spark History Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-HistoryServer.html">HistoryServer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-SQLHistoryListener.html">SQLHistoryListener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-FsHistoryProvider.html">FsHistoryProvider</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-ApplicationHistoryProvider.html">ApplicationHistoryProvider</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-HistoryServerArguments.html">HistoryServerArguments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-ApplicationCacheOperations.html">ApplicationCacheOperations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-history-server-ApplicationCache.html">ApplicationCache</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Monitoring, Tuning, Debugging and Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-tuning.html">Performance Tuning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-scheduler-SparkListener.html">SparkListener</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListener-AppStatusListener.html">AppStatusListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListener-EventLoggingListener.html">EventLoggingListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListener-ExecutorAllocationListener.html">ExecutorAllocationListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListener-SpillListener.html">SpillListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListener-StatsReportListener.html">StatsReportListener</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-scheduler-LiveListenerBus.html">LiveListenerBus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-SparkListenerBus.html">SparkListenerBus</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListenerBus-AsyncEventQueue.html">AsyncEventQueue</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkListenerBus-ReplayListenerBus.html">ReplayListenerBus</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-JsonProtocol.html">JsonProtocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-debugging.html">Debugging Spark</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Varia</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="varia/spark-building-from-sources.html">Building Apache Spark from Sources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="varia/spark-hadoop.html">Spark and Hadoop</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-SparkHadoopUtil.html">SparkHadoopUtil</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="varia/spark-inmemory-filesystems.html">Spark and software in-memory file systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="varia/spark-others.html">Spark and The Others</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="varia/spark-deeplearning.html">Distributed Deep Learning on Spark</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="varia/spark-packages.html">Spark Packages</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-tips-and-tricks.html">Spark Tips and Tricks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-tips-and-tricks-access-private-members-spark-shell.html">Access private members in Scala in Spark shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-tips-and-tricks-sparkexception-task-not-serializable.html">SparkException: Task not serializable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-tips-and-tricks-running-spark-windows.html">Running Spark Applications on Windows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Further Learning</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-courses.html">Courses</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-books.html">Books</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spark-sql.html">Spark SQL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spark-structured-streaming.html">Spark Structured Streaming</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/index.html">Web UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-jobs.html">Jobs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-stages.html">Stages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-storage.html">Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-environment.html">Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-executors.html">Executors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-JobsTab.html">JobsTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-AllJobsPage.html">AllJobsPage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-JobPage.html">JobPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-StagesTab.html">StagesTab&#8201;&#8212;&#8201;Stages for All Jobs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-AllStagesPage.html">AllStagesPage&#8201;&#8212;&#8201;Stages for All Jobs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-StagePage.html">StagePage&#8201;&#8212;&#8201;Stage Details</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-PoolPage.html">PoolPage&#8201;&#8212;&#8201;Pool Details</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-StorageTab.html">StorageTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-StoragePage.html">StoragePage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-RDDPage.html">RDDPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-EnvironmentTab.html">EnvironmentTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-EnvironmentPage.html">EnvironmentPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-ExecutorsTab.html">ExecutorsTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-ExecutorsPage.html">ExecutorsPage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-ExecutorThreadDumpPage.html">ExecutorThreadDumpPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-SparkUI.html">SparkUI&#8201;&#8212;&#8201;Web UI of Spark Application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-SparkUITab.html">SparkUITab</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-BlockStatusListener.html">BlockStatusListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-EnvironmentListener.html">EnvironmentListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-executors-ExecutorsListener.html">ExecutorsListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-JobProgressListener.html">JobProgressListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-StorageStatusListener.html">StorageStatusListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-StorageListener.html">StorageListener&#8201;&#8212;&#8201;Spark Listener for Tracking Persistence Status of RDD Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-RDDOperationGraphListener.html">RDDOperationGraphListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-webui-WebUI.html">WebUI&#8201;&#8212;&#8201;Framework For Web UIs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-WebUIPage.html">WebUIPage&#8201;&#8212;&#8201;Contract of Pages in Web UI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-webui-WebUITab.html">WebUITab&#8201;&#8212;&#8201;Contract of Tabs in Web UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-RDDStorageInfo.html">RDDStorageInfo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-core-RDDInfo.html">RDDInfo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="webui/spark-core-LiveEntity.html">LiveEntity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webui/spark-core-LiveRDD.html">LiveRDD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-UIUtils.html">UIUtils</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-JettyUtils.html">JettyUtils</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webui/spark-webui-properties.html">web UI Configuration Properties</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="metrics/index.html">Spark Metrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="metrics/spark-metrics-MetricsSystem.html">MetricsSystem</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="metrics/spark-metrics-MetricsConfig.html">MetricsConfig</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="metrics/spark-metrics-Source.html">Source</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="metrics/spark-scheduler-DAGSchedulerSource.html">DAGSchedulerSourcer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="metrics/spark-metrics-Sink.html">Sink</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="metrics/spark-metrics-MetricsServlet.html">MetricsServlet JSON Metrics Sink</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="metrics/spark-metrics-properties.html">Metrics Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="metrics/spark-executor-TaskMetrics.html">TaskMetrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="metrics/spark-executor-ShuffleWriteMetrics.html">ShuffleWriteMetrics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/index.html">Spark MLlib</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-pipelines.html">ML Pipelines (spark.ml)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-Pipeline.html">Pipeline</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-PipelineStage.html">PipelineStage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-transformers.html">Transformers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-Transformer.html">Transformer</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-transformers-Tokenizer.html">Tokenizer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-estimators.html">Estimators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-Estimator.html">Estimator</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-StringIndexer.html">StringIndexer</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-KMeans.html">KMeans</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-TrainValidationSplit.html">TrainValidationSplit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-Predictor.html">Predictor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-RandomForestRegressor.html">RandomForestRegressor</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-Regressor.html">Regressor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-LinearRegression.html">LinearRegression</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-Classifier.html">Classifier</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-RandomForestClassifier.html">RandomForestClassifier</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="spark-mllib/spark-mllib-DecisionTreeClassifier.html">DecisionTreeClassifier</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-models.html">Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-Model.html">Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-Evaluator.html">Evaluator&#8201;&#8212;&#8201;ML Pipeline Component for Model Scoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-BinaryClassificationEvaluator.html">BinaryClassificationEvaluator&#8201;&#8212;&#8201;Evaluator of Binary Classification Models</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-ClusteringEvaluator.html">ClusteringEvaluator&#8201;&#8212;&#8201;Evaluator of Clustering Models</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-MulticlassClassificationEvaluator.html">MulticlassClassificationEvaluator&#8201;&#8212;&#8201;Evaluator of Multiclass Classification Models</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-RegressionEvaluator.html">RegressionEvaluator&#8201;&#8212;&#8201;Evaluator of Regression Models</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-CrossValidator.html">CrossValidator&#8201;&#8212;&#8201;Model Tuning / Finding The Best Model</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-CrossValidatorModel.html">CrossValidatorModel</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-ParamGridBuilder.html">ParamGridBuilder</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-CrossValidator-example.html">CrossValidator with Pipeline Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-Params.html">Params and ParamMaps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-ValidatorParams.html">ValidatorParams</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spark-mllib/spark-mllib-HasParallelism.html">HasParallelism</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-pipelines-persistence.html">ML Persistence&#8201;&#8212;&#8201;Saving and Loading Models and Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-MLWritable.html">MLWritable</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-MLReader.html">MLReader</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-pipelines-example-classification.html">Example&#8201;&#8212;&#8201;Text Classification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-pipelines-example-regression.html">Example&#8201;&#8212;&#8201;Linear Regression</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-logistic-regression.html">Logistic Regression</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-LogisticRegression.html">LogisticRegression</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-latent-dirichlet-allocation.html">Latent Dirichlet Allocation (LDA)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-vector.html">Vector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-labeledpoint.html">LabeledPoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-streaming.html">Streaming MLlib</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-GeneralizedLinearRegression.html">GeneralizedLinearRegression</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-mllib/spark-mllib-alternating-least-squares.html">Alternating Least Squares (ALS) Matrix Factorization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-ALS.html">ALS&#8201;&#8212;&#8201;Estimator for ALSModel</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-ALSModel.html">ALSModel&#8201;&#8212;&#8201;Model for Predictions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-mllib/spark-mllib-ALSModelReader.html">ALSModelReader</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-Instrumentation.html">Instrumentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-mllib/spark-mllib-MLUtils.html">MLUtils</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-local/index.html">Spark local</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-local/spark-LocalSchedulerBackend.html">LocalSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-local/spark-LocalEndpoint.html">LocalEndpoint&#8201;&#8212;&#8201;RPC Endpoint for LocalSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-local/spark-LauncherBackend.html">LauncherBackend</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-on-yarn/index.html">Spark on YARN</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-YarnShuffleService.html">YarnShuffleService&#8201;&#8212;&#8201;ExternalShuffleService on YARN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-ExecutorRunnable.html">ExecutorRunnable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-client.html">Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-yarnrmclient.html">YarnRMClient</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-on-yarn/spark-yarn-applicationmaster.html">ApplicationMaster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-AMEndpoint.html">AMEndpoint&#8201;&#8212;&#8201;ApplicationMaster RPC Endpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-YarnClusterManager.html">YarnClusterManager&#8201;&#8212;&#8201;ExternalClusterManager for YARN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-on-yarn/spark-yarn-taskschedulers.html">TaskSchedulers for YARN</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-yarnscheduler.html">YarnScheduler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-yarnclusterscheduler.html">YarnClusterScheduler</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-on-yarn/spark-yarn-schedulerbackends.html">SchedulerBackends for YARN</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-yarnschedulerbackend.html">YarnSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-client-yarnclientschedulerbackend.html">YarnClientSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-cluster-yarnclusterschedulerbackend.html">YarnClusterSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-cluster-YarnSchedulerEndpoint.html">YarnSchedulerEndpoint RPC Endpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-YarnAllocator.html">YarnAllocator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-introduction.html">Introduction to Hadoop YARN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-cluster-setup.html">Setting up YARN Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-on-yarn/spark-yarn-kerberos.html">Kerberos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-ConfigurableCredentialManager.html">ConfigurableCredentialManager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-ClientDistributedCacheManager.html">ClientDistributedCacheManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-YarnSparkHadoopUtil.html">YarnSparkHadoopUtil</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-yarn/spark-yarn-settings.html">Settings</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-standalone/index.html">Spark Standalone</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-Master.html">Standalone Master&#8201;&#8212;&#8201;Cluster Manager of Spark Standalone</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-worker.html">Standalone Worker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-standalone/spark-standalone-webui.html">web UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-standalone/spark-standalone-webui-ApplicationPage.html">ApplicationPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-LocalSparkCluster.html">LocalSparkCluster&#8201;&#8212;&#8201;Single-JVM Spark Standalone Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-submission-gateways.html">Submission Gateways</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-master-scripts.html">Management Scripts for Standalone Master</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-worker-scripts.html">Management Scripts for Standalone Workers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-status.html">Checking Status</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-example-2-workers-on-1-node-cluster.html">Example 2-workers-on-1-node Standalone Cluster (one executor per worker)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-standalone/spark-standalone-StandaloneSchedulerBackend.html">StandaloneSchedulerBackend</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="rest-api/index.html">Status REST API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="rest-api/spark-api-ApiRootResource.html">ApiRootResource&#8201;&#8212;&#8201;/api/v1 URI Handler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rest-api/spark-api-ApplicationListResource.html">ApplicationListResource&#8201;&#8212;&#8201;applications URI Handler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="rest-api/spark-api-OneApplicationResource.html">OneApplicationResource&#8201;&#8212;&#8201;applications/appId URI Handler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="rest-api/spark-api-StagesResource.html">StagesResource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rest-api/spark-api-OneApplicationAttemptResource.html">OneApplicationAttemptResource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rest-api/spark-api-AbstractApplicationResource.html">AbstractApplicationResource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rest-api/spark-api-BaseAppResource.html">BaseAppResource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rest-api/spark-api-ApiRequestContext.html">ApiRequestContext</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="rest-api/spark-api-UIRoot.html">UIRoot&#8201;&#8212;&#8201;Contract for Root Contrainers of Application UI Information</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rest-api/spark-api-UIRootFromServletContext.html">UIRootFromServletContext</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-on-mesos/index.html">Spark on Mesos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-mesos/spark-mesos-MesosCoarseGrainedSchedulerBackend.html">MesosCoarseGrainedSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-mesos/spark-mesos-introduction.html">About Mesos</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-on-mesos/spark-executor-backends-MesosExecutorBackend.html">MesosExecutorBackend</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Exercises</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-pairrddfunctions-oneliners.html">One-liners using PairRDDFunctions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-take-multiple-jobs.html">Learning Jobs and Partitions Using take Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-standalone-master-ha.html">Spark Standalone - Using ZooKeeper for High-Availability of Master</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-hello-world-using-spark-shell.html">Spark&#8217;s Hello World using Spark shell and Scala</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-examples-wordcount-spark-shell.html">WordCount using Spark shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-first-app.html">Your first complete Spark application (using Scala and sbt)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-notable-use-cases.html">Spark (notable) use cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-sql-hive-orc-example.html">Using Spark SQL to update data in Hive using ORC files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-custom-scheduler-listener.html">Developing Custom SparkListener to monitor DAGScheduler in Scala</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-custom-rpc-environment.html">Developing RPC Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-custom-rdd.html">Developing Custom RDD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-dataframe-jdbc-postgresql.html">Working with Datasets from JDBC Data Sources (and PostgreSQL)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exercises/spark-exercise-failing-stage.html">Causing Stage to Fail</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Apache Spark</span>
    <span class="version">2.4.4</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Apache Spark</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2.4.4</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Apache Spark</a></li>
    <li>Core Services</li>
    <li>Low-Level Spark Task Scheduler</li>
    <li><a href="spark-scheduler-TaskScheduler.html">TaskScheduler</a></li>
    <li><a href="spark-scheduler-TaskSchedulerImpl.html">TaskSchedulerImpl</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/alex/Alex/_Code/GitBook/mastering-apache-spark-book-cn/modules/ROOT/pages/spark-scheduler-TaskSchedulerImpl.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<div class="sect1">
<h2 id="_taskschedulerimpldefault_spark_scheduler"><a class="anchor" href="#_taskschedulerimpldefault_spark_scheduler"></a><a id="TaskSchedulerImpl"></a> TaskSchedulerImpl&#8201;&#8212;&#8201;Default Spark Scheduler</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> is the default <a href="spark-scheduler-TaskScheduler.adoc">TaskScheduler</a> that uses a <a href="#backend">SchedulerBackend</a> to schedule tasks (for execution on a cluster manager).</p>
</div>
<div class="paragraph">
<p>When a Spark application starts (and so an instance of <a href="spark-SparkContext.adoc#creating-instance">SparkContext is created</a>) <code>TaskSchedulerImpl</code> with a <a href="spark-SchedulerBackend.adoc">SchedulerBackend</a> and <a href="spark-scheduler-DAGScheduler.adoc">DAGScheduler</a> are created and soon started.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/taskschedulerimpl-sparkcontext-schedulerbackend-dagscheduler.png" alt="taskschedulerimpl sparkcontext schedulerbackend dagscheduler">
</div>
<div class="title">Figure 1. TaskSchedulerImpl and Other Services</div>
</div>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> <a href="#resourceOffers">generates tasks for executor resource offers</a>.</p>
</div>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> can <a href="#getRackForHost">track racks per host and port</a> (that however is <a href="yarn/spark-yarn-yarnscheduler.adoc">only used with Hadoop YARN cluster manager</a>).</p>
</div>
<div class="paragraph">
<p>Using <a href="spark-configuration-properties.html#spark.scheduler.mode" class="page">spark.scheduler.mode</a> setting you can select the <a href="spark-scheduler-SchedulingMode.adoc">scheduling policy</a>.</p>
</div>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> <a href="#submitTasks">submits tasks</a> using <a href="spark-scheduler-SchedulableBuilder.adoc">SchedulableBuilders</a>.</p>
</div>
<div id="CPUS_PER_TASK" class="paragraph">
<p><code>TaskSchedulerImpl</code> uses <a href="spark-configuration-properties.html#spark.task.cpus" class="page">spark.task.cpus</a> configuration property (default: <code>1</code>) for&#8230;&#8203;FIXME</p>
</div>
<table id="internal-registries" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. TaskSchedulerImpl&#8217;s Internal Properties (e.g. Registries, Counters and Flags)</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dagScheduler</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="dagScheduler"></a> <a href="spark-scheduler-DAGScheduler.adoc">DAGScheduler</a></p>
</div>
<div class="paragraph">
<p>Used when&#8230;&#8203;FIXME</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executorIdToHost</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="executorIdToHost"></a> Lookup table of hosts per executor.</p>
</div>
<div class="paragraph">
<p>Used when&#8230;&#8203;FIXME</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executorIdToRunningTaskIds</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="executorIdToRunningTaskIds"></a> Lookup table of running tasks per executor.</p>
</div>
<div class="paragraph">
<p>Used when&#8230;&#8203;FIXME</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executorIdToTaskCount</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="executorIdToTaskCount"></a> Lookup table of the number of running tasks by <a href="spark-Executor.adoc">executor</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executorsByHost</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="executorsByHost"></a> Collection of <a href="spark-Executor.adoc">executors</a> per host</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasLaunchedTask</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="hasLaunchedTask"></a> Flag&#8230;&#8203;FIXME</p>
</div>
<div class="paragraph">
<p>Used when&#8230;&#8203;FIXME</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostToExecutors</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="hostToExecutors"></a> Lookup table of executors per hosts in a cluster.</p>
</div>
<div class="paragraph">
<p>Used when&#8230;&#8203;FIXME</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostsByRack</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="hostsByRack"></a> Lookup table of hosts per rack.</p>
</div>
<div class="paragraph">
<p>Used when&#8230;&#8203;FIXME</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nextTaskId</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="nextTaskId"></a> The next <a href="spark-scheduler-Task.adoc">task</a> id counting from <code>0</code>.</p>
</div>
<div class="paragraph">
<p>Used when <code>TaskSchedulerImpl</code>&#8230;&#8203;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rootPool</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="rootPool"></a> <a href="spark-scheduler-Pool.adoc">Schedulable pool</a></p>
</div>
<div class="paragraph">
<p>Used when <code>TaskSchedulerImpl</code>&#8230;&#8203;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schedulableBuilder</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="schedulableBuilder"></a> <a href="spark-scheduler-SchedulableBuilder.html" class="page">SchedulableBuilder</a></p>
</div>
<div class="paragraph">
<p>Created when <code>TaskSchedulerImpl</code> is requested to <a href="#initialize">initialize</a> and can be one of two available builders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="spark-scheduler-FIFOSchedulableBuilder.adoc">FIFOSchedulableBuilder</a> when scheduling policy is FIFO (which is the default scheduling policy).</p>
</li>
<li>
<p><a href="spark-scheduler-FairSchedulableBuilder.adoc">FairSchedulableBuilder</a> for FAIR scheduling policy.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use <a href="spark-configuration-properties.html#spark.scheduler.mode" class="page">spark.scheduler.mode</a> setting to select the scheduling policy.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>schedulingMode</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="schedulingMode"></a> <a href="spark-scheduler-SchedulingMode.adoc">SchedulingMode</a></p>
</div>
<div class="paragraph">
<p>Used when <code>TaskSchedulerImpl</code>&#8230;&#8203;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taskSetsByStageIdAndAttempt</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="taskSetsByStageIdAndAttempt"></a> Lookup table of <a href="spark-scheduler-TaskSet.adoc">TaskSet</a> by stage and attempt ids.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taskIdToExecutorId</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="taskIdToExecutorId"></a> Lookup table of <a href="spark-Executor.adoc">executor</a> by task id.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taskIdToTaskSetManager</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="taskIdToTaskSetManager"></a> Registry of active <a href="spark-scheduler-TaskSetManager.adoc">TaskSetManager</a> per task id.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Enable <code>INFO</code> or <code>DEBUG</code> logging levels for <code>org.apache.spark.scheduler.TaskSchedulerImpl</code> logger to see what happens inside.</p>
</div>
<div class="paragraph">
<p>Add the following line to <code>conf/log4j.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>log4j.logger.org.apache.spark.scheduler.TaskSchedulerImpl=DEBUG</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to <a href="spark-logging.adoc">Logging</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_taskschedulerimpl_and_schedulerbackend"><a class="anchor" href="#_taskschedulerimpl_and_schedulerbackend"></a><a id="backend"></a> TaskSchedulerImpl and SchedulerBackend</h3>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> is assigned a <a href="spark-SchedulerBackend.html" class="page">SchedulerBackend</a> at <a href="#initialize">initialization</a>.</p>
</div>
<div class="paragraph">
<p>The lifecycle of the <code>SchedulerBackend</code> is tightly coupled to the lifecycle of the <code>TaskSchedulerImpl</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>At <a href="#start">startup</a>, <code>TaskSchedulerImpl</code> requests the <code>SchedulerBackend</code> to <a href="spark-SchedulerBackend.html#start" class="page">start</a>, too</p>
</li>
<li>
<p>When <a href="#stop">stopped</a>, so <a href="spark-SchedulerBackend.html#stop" class="page">is</a> the <code>SchedulerBackend</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> <a href="#waitBackendReady">waits until the SchedulerBackend is ready</a> before requesting it for the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="spark-SchedulerBackend.html#reviveOffers" class="page">Reviving resource offers</a> when requested to <a href="#submitTasks">submitTasks</a>, <a href="#statusUpdate">statusUpdate</a>, <a href="#handleFailedTask">handleFailedTask</a>, <a href="#checkSpeculatableTasks">checkSpeculatableTasks</a>, and <a href="#executorLost">executorLost</a></p>
</li>
<li>
<p><a href="spark-SchedulerBackend.html#killTask" class="page">Killing tasks</a> when requested to <a href="#killTaskAttempt">killTaskAttempt</a> and <a href="#killAllTaskAttempts">killAllTaskAttempts</a></p>
</li>
<li>
<p><a href="spark-SchedulerBackend.html#defaultParallelism" class="page">Default parallelism</a>, <a href="#applicationId">applicationId</a> and <a href="#applicationAttemptId">applicationAttemptId</a> when requested for the <a href="#defaultParallelism">defaultParallelism</a>, <a href="spark-SchedulerBackend.html#applicationId" class="page">applicationId</a> and <a href="spark-SchedulerBackend.html#applicationAttemptId" class="page">applicationAttemptId</a>, respectively</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_finding_unique_identifier_of_spark_applicationapplicationid_method"><a class="anchor" href="#_finding_unique_identifier_of_spark_applicationapplicationid_method"></a><a id="applicationId"></a> Finding Unique Identifier of Spark Application&#8201;&#8212;&#8201;<code>applicationId</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">applicationId(): String</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>applicationId</code> is part of <a href="spark-scheduler-TaskScheduler.adoc#contract">TaskScheduler contract</a> to find the Spark application&#8217;s id.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>applicationId</code> simply request <a href="#backend">SchedulerBackend</a> for the <a href="spark-SchedulerBackend.adoc#applicationId">Spark application&#8217;s id</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nodeblacklist_method"><a class="anchor" href="#_nodeblacklist_method"></a><a id="nodeBlacklist"></a> <code>nodeBlacklist</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_cleanuptaskstate_method"><a class="anchor" href="#_cleanuptaskstate_method"></a><a id="cleanupTaskState"></a> <code>cleanupTaskState</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_newtaskid_method"><a class="anchor" href="#_newtaskid_method"></a><a id="newTaskId"></a> <code>newTaskId</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_getexecutorsaliveonhost_method"><a class="anchor" href="#_getexecutorsaliveonhost_method"></a><a id="getExecutorsAliveOnHost"></a> <code>getExecutorsAliveOnHost</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_isexecutoralive_method"><a class="anchor" href="#_isexecutoralive_method"></a><a id="isExecutorAlive"></a> <code>isExecutorAlive</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_hasexecutorsaliveonhost_method"><a class="anchor" href="#_hasexecutorsaliveonhost_method"></a><a id="hasExecutorsAliveOnHost"></a> <code>hasExecutorsAliveOnHost</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_hashostaliveonrack_method"><a class="anchor" href="#_hashostaliveonrack_method"></a><a id="hasHostAliveOnRack"></a> <code>hasHostAliveOnRack</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_executorlost_method"><a class="anchor" href="#_executorlost_method"></a><a id="executorLost"></a> <code>executorLost</code> Method</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_mapoutputtracker"><a class="anchor" href="#_mapoutputtracker"></a><a id="mapOutputTracker"></a> <code>mapOutputTracker</code></h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_starvationtimer"><a class="anchor" href="#_starvationtimer"></a><a id="starvationTimer"></a> <code>starvationTimer</code></h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_executorheartbeatreceived_method"><a class="anchor" href="#_executorheartbeatreceived_method"></a><a id="executorHeartbeatReceived"></a> <code>executorHeartbeatReceived</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">executorHeartbeatReceived(
  execId: String,
  accumUpdates: Array[(Long, Seq[AccumulatorV2[_, _]])],
  blockManagerId: BlockManagerId): Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>executorHeartbeatReceived</code> is&#8230;&#8203;</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>executorHeartbeatReceived</code> is part of the <a href="spark-scheduler-TaskScheduler.adoc#contract">TaskScheduler Contract</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_cancelling_all_tasks_of_stagecanceltasks_method"><a class="anchor" href="#_cancelling_all_tasks_of_stagecanceltasks_method"></a><a id="cancelTasks"></a> Cancelling All Tasks of Stage&#8201;&#8212;&#8201;<code>cancelTasks</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">cancelTasks(stageId: Int, interruptThread: Boolean): Unit</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>cancelTasks</code> is part of <a href="spark-scheduler-TaskScheduler.adoc#contract">TaskScheduler contract</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>cancelTasks</code> cancels all tasks submitted for execution in a stage <code>stageId</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>cancelTasks</code> is used exclusively when <code>DAGScheduler</code> <a href="spark-scheduler-DAGScheduler.adoc#failJobAndIndependentStages">cancels a stage</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_handlesuccessfultask_method"><a class="anchor" href="#_handlesuccessfultask_method"></a><a id="handleSuccessfulTask"></a> <code>handleSuccessfulTask</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">handleSuccessfulTask(
  taskSetManager: TaskSetManager,
  tid: Long,
  taskResult: DirectTaskResult[_]): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>handleSuccessfulTask</code> simply <a href="spark-scheduler-TaskSetManager.adoc#handleSuccessfulTask">forwards the call to the input <code>taskSetManager</code></a> (passing <code>tid</code> and <code>taskResult</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>handleSuccessfulTask</code> is called when <a href="spark-scheduler-TaskResultGetter.adoc#enqueueSuccessfulTask"><code>TaskSchedulerGetter</code> has managed to deserialize the task result of a task that finished successfully</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_handletaskgettingresult_method"><a class="anchor" href="#_handletaskgettingresult_method"></a><a id="handleTaskGettingResult"></a> <code>handleTaskGettingResult</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">handleTaskGettingResult(taskSetManager: TaskSetManager, tid: Long): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>handleTaskGettingResult</code> simply <a href="spark-scheduler-TaskSetManager.adoc#handleTaskGettingResult">forwards the call to the <code>taskSetManager</code></a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>handleTaskGettingResult</code> is used to inform that <a href="spark-scheduler-TaskResultGetter.adoc#enqueueSuccessfulTask"><code>TaskResultGetter</code> enqueues a successful task with <code>IndirectTaskResult</code> task result (and so is about to fetch a remote block from a <code>BlockManager</code>)</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_applicationattemptid_method"><a class="anchor" href="#_applicationattemptid_method"></a><a id="applicationAttemptId"></a> <code>applicationAttemptId</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">applicationAttemptId(): Option[String]</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_tracking_racks_per_hosts_and_portsgetrackforhost_method"><a class="anchor" href="#_tracking_racks_per_hosts_and_portsgetrackforhost_method"></a><a id="getRackForHost"></a> Tracking Racks per Hosts and Ports&#8201;&#8212;&#8201;<code>getRackForHost</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">getRackForHost(value: String): Option[String]</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>getRackForHost</code> is a method to know about the racks per hosts and ports. By default, it assumes that racks are unknown (i.e. the method returns <code>None</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is overriden by the YARN-specific TaskScheduler <a href="yarn/spark-yarn-yarnscheduler.adoc">YarnScheduler</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>getRackForHost</code> is currently used in two places:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#resourceOffers">TaskSchedulerImpl.resourceOffers</a> to track hosts per rack (using the <a href="#internal-registries">internal <code>hostsByRack</code> registry</a>) while processing resource offers.</p>
</li>
<li>
<p><a href="#removeExecutor">TaskSchedulerImpl.removeExecutor</a> to&#8230;&#8203;FIXME</p>
</li>
<li>
<p><a href="spark-scheduler-TaskSetManager.adoc#addPendingTask">TaskSetManager.addPendingTask</a>, <a href="spark-scheduler-TaskSetManager.adoc#">TaskSetManager.dequeueTask</a>, and <a href="spark-scheduler-TaskSetManager.adoc#dequeueSpeculativeTask">TaskSetManager.dequeueSpeculativeTask</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creating_taskschedulerimpl_instance"><a class="anchor" href="#_creating_taskschedulerimpl_instance"></a><a id="creating-instance"></a> Creating TaskSchedulerImpl Instance</h3>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> takes the following when created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="sc"></a> <a href="spark-SparkContext.adoc">SparkContext</a></p>
</li>
<li>
<p><a href="#maxTaskFailures">Acceptable number of task failures</a></p>
</li>
<li>
<p><a id="blacklistTrackerOpt"></a> optional <code>BlacklistTracker</code></p>
</li>
<li>
<p><a id="isLocal"></a> optional <code>isLocal</code> flag to differentiate between local and cluster run modes (defaults to <code>false</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> initializes the <a href="#internal-registries">internal registries and counters</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is another <code>TaskSchedulerImpl</code> constructor that requires a <a href="spark-SparkContext.adoc">SparkContext</a> object only and sets <a href="#maxTaskFailures">maxTaskFailures</a> to <a href="spark-configuration-properties.html#spark.task.maxFailures" class="page">spark.task.maxFailures</a> or, if not set, defaults to <code>4</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>TaskSchedulerImpl</code> sets <a href="spark-scheduler-TaskScheduler.adoc#contract">schedulingMode</a> to the value of <a href="spark-configuration-properties.html#spark.scheduler.mode" class="page">spark.scheduler.mode</a> setting (defaults to <code>FIFO</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>schedulingMode</code> is part of <a href="spark-scheduler-TaskScheduler.adoc#contract">TaskScheduler Contract</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Failure to set <code>schedulingMode</code> results in a <code>SparkException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Unrecognized spark.scheduler.mode: [schedulingModeConf]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ultimately, <code>TaskSchedulerImpl</code> creates a <a href="spark-scheduler-TaskResultGetter.adoc">TaskResultGetter</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_initializinginitialize_method"><a class="anchor" href="#_initializinginitialize_method"></a><a id="initialize"></a> Initializing&#8201;&#8212;&#8201;<code>initialize</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">initialize(backend: SchedulerBackend): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>initialize</code> initializes <code>TaskSchedulerImpl</code>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/TaskSchedulerImpl-initialize.png" alt="TaskSchedulerImpl initialize">
</div>
<div class="title">Figure 2. TaskSchedulerImpl initialization</div>
</div>
<div class="paragraph">
<p><code>initialize</code> saves the input <a href="#backend">SchedulerBackend</a>.</p>
</div>
<div class="paragraph">
<p><code>initialize</code> then sets <a href="#rootPool">schedulable <code>Pool</code></a> as an empty-named <a href="spark-scheduler-Pool.adoc">Pool</a> (passing in <a href="#schedulingMode">SchedulingMode</a>, <code>initMinShare</code> and <code>initWeight</code> as <code>0</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="#schedulingMode">SchedulingMode</a> is defined when <a href="#creating-instance"><code>TaskSchedulerImpl</code> is created</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="#schedulingMode">schedulingMode</a> and <a href="#rootPool">rootPool</a> are a part of <a href="spark-scheduler-TaskScheduler.adoc#contract">TaskScheduler Contract</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>initialize</code> sets <a href="#schedulableBuilder">SchedulableBuilder</a> (based on <a href="#schedulingMode">SchedulingMode</a>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="spark-scheduler-FIFOSchedulableBuilder.adoc">FIFOSchedulableBuilder</a> for <code>FIFO</code> scheduling mode</p>
</li>
<li>
<p><a href="spark-scheduler-FairSchedulableBuilder.adoc">FairSchedulableBuilder</a> for <code>FAIR</code> scheduling mode</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>initialize</code> <a href="spark-scheduler-SchedulableBuilder.adoc#buildPools">requests <code>SchedulableBuilder</code> to build pools</a>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Why are <code>rootPool</code> and <code>schedulableBuilder</code> created only now? What do they need that it is not available when <code>TaskSchedulerImpl</code> is created?
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>initialize</code> is called while <a href="spark-SparkContext.adoc#createTaskScheduler">SparkContext is created and creates <code>SchedulerBackend</code> and <code>TaskScheduler</code></a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_starting_taskschedulerimplstart_method"><a class="anchor" href="#_starting_taskschedulerimplstart_method"></a><a id="start"></a> Starting TaskSchedulerImpl&#8201;&#8212;&#8201;<code>start</code> Method</h3>
<div class="paragraph">
<p>As part of <a href="spark-SparkContext-creating-instance-internals.adoc">initialization of a <code>SparkContext</code></a>, <code>TaskSchedulerImpl</code> is started (using <code>start</code> from the <a href="spark-scheduler-TaskScheduler.adoc#contract">TaskScheduler Contract</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">start(): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>start</code> starts the <a href="spark-SchedulerBackend.adoc">scheduler backend</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/taskschedulerimpl-start-standalone.png" alt="taskschedulerimpl start standalone">
</div>
<div class="title">Figure 3. Starting <code>TaskSchedulerImpl</code> in Spark Standalone</div>
</div>
<div class="paragraph">
<p><code>start</code> also starts <a href="#task-scheduler-speculation"><code>task-scheduler-speculation</code> executor service</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_handling_task_status_updatestatusupdate_method"><a class="anchor" href="#_handling_task_status_updatestatusupdate_method"></a><a id="statusUpdate"></a> Handling Task Status Update&#8201;&#8212;&#8201;<code>statusUpdate</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">statusUpdate(tid: Long, state: TaskState, serializedData: ByteBuffer): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>statusUpdate</code> finds <a href="spark-scheduler-TaskSetManager.adoc">TaskSetManager</a> for the input <code>tid</code> task (in <a href="#taskIdToTaskSetManager">taskIdToTaskSetManager</a>).</p>
</div>
<div class="paragraph">
<p>When <code>state</code> is <code>LOST</code>, <code>statusUpdate</code>&#8230;&#8203;FIXME</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>TaskState.LOST</code> is only used by the deprecated Mesos fine-grained scheduling mode.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When <code>state</code> is one of the <a href="spark-scheduler-Task.adoc#states">finished states</a>, i.e. <code>FINISHED</code>, <code>FAILED</code>, <code>KILLED</code> or <code>LOST</code>, <code>statusUpdate</code> <a href="#cleanupTaskState">cleanupTaskState</a> for the input <code>tid</code>.</p>
</div>
<div class="paragraph">
<p><code>statusUpdate</code> <a href="spark-scheduler-TaskSetManager.adoc#removeRunningTask">requests <code>TaskSetManager</code> to unregister <code>tid</code> from running tasks</a>.</p>
</div>
<div class="paragraph">
<p><code>statusUpdate</code> requests <a href="#taskResultGetter">TaskResultGetter</a> to <a href="spark-scheduler-TaskResultGetter.adoc#enqueueSuccessfulTask">schedule an asynchrounous task to deserialize the task result (and notify <code>TaskSchedulerImpl</code> back)</a> for <code>tid</code> in <code>FINISHED</code> state and <a href="spark-scheduler-TaskResultGetter.adoc#enqueueFailedTask">schedule an asynchrounous task to deserialize <code>TaskFailedReason</code> (and notify <code>TaskSchedulerImpl</code> back)</a> for <code>tid</code> in the other finished states (i.e. <code>FAILED</code>, <code>KILLED</code>, <code>LOST</code>).</p>
</div>
<div class="paragraph">
<p>If a task is in <code>LOST</code> state, <code>statusUpdate</code> <a href="spark-scheduler-DAGScheduler.adoc#executorLost">notifies <code>DAGScheduler</code> that the executor was lost</a> (with <code>SlaveLost</code> and the reason <code>Task [tid] was lost, so marking the executor as lost as well.</code>) and <a href="spark-SchedulerBackend.adoc#reviveOffers">requests <code>SchedulerBackend</code> to revive offers</a>.</p>
</div>
<div class="paragraph">
<p>In case the <code>TaskSetManager</code> for <code>tid</code> could not be found (in <a href="#taskIdToTaskSetManager">taskIdToTaskSetManager</a> registry), you should see the following ERROR message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ERROR Ignoring update with state [state] for TID [tid] because its task set is gone (this is likely the result of receiving duplicate task finished status updates)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any exception is caught and reported as ERROR message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ERROR Exception in statusUpdate</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME image with scheduler backends calling <code>TaskSchedulerImpl.statusUpdate</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>statusUpdate</code> is used when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DriverEndpoint</code> (of <a href="spark-CoarseGrainedSchedulerBackend.adoc">CoarseGrainedSchedulerBackend</a>) is requested to <a href="spark-CoarseGrainedSchedulerBackend-DriverEndpoint.adoc#StatusUpdate">handle a StatusUpdate message</a></p>
</li>
<li>
<p><code>LocalEndpoint</code> is requested to <a href="local/spark-LocalEndpoint.adoc#StatusUpdate">handle a StatusUpdate message</a></p>
</li>
<li>
<p><code>MesosFineGrainedSchedulerBackend</code> is requested to handle a task status update</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_task_scheduler_speculation_scheduled_executor_servicespeculationscheduler_internal_attribute"><a class="anchor" href="#_task_scheduler_speculation_scheduled_executor_servicespeculationscheduler_internal_attribute"></a><a id="speculationScheduler"></a><a id="task-scheduler-speculation"></a> task-scheduler-speculation Scheduled Executor Service&#8201;&#8212;&#8201;<code>speculationScheduler</code> Internal Attribute</h3>
<div class="paragraph">
<p><code>speculationScheduler</code> is a <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html">java.util.concurrent.ScheduledExecutorService</a> with the name <strong>task-scheduler-speculation</strong> for <a href="spark-taskschedulerimpl-speculative-execution.adoc">speculative execution of tasks</a>.</p>
</div>
<div class="paragraph">
<p>When <a href="#start"><code>TaskSchedulerImpl</code> starts</a> (in non-local run mode) with <a href="spark-taskschedulerimpl-speculative-execution.adoc#spark_speculation">spark.speculation</a> enabled, <code>speculationScheduler</code> is used to schedule <a href="#checkSpeculatableTasks">checkSpeculatableTasks</a> to execute periodically every <a href="spark-taskschedulerimpl-speculative-execution.adoc#spark_speculation_interval">spark.speculation.interval</a> after the initial <code>spark.speculation.interval</code> passes.</p>
</div>
<div class="paragraph">
<p><code>speculationScheduler</code> is shut down when <a href="#stop"><code>TaskSchedulerImpl</code> stops</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_checking_for_speculatable_taskscheckspeculatabletasks_method"><a class="anchor" href="#_checking_for_speculatable_taskscheckspeculatabletasks_method"></a><a id="checkSpeculatableTasks"></a> Checking for Speculatable Tasks&#8201;&#8212;&#8201;<code>checkSpeculatableTasks</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">checkSpeculatableTasks(): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>checkSpeculatableTasks</code> requests <code>rootPool</code> to check for speculatable tasks (if they ran for more than <code>100</code> ms) and, if there any, requests <a href="spark-SchedulerBackend.adoc#reviveOffers"><code>SchedulerBackend</code> to revive offers</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>checkSpeculatableTasks</code> is executed periodically as part of <a href="spark-taskschedulerimpl-speculative-execution.adoc">speculative execution of tasks</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_acceptable_number_of_task_failuresmaxtaskfailures_attribute"><a class="anchor" href="#_acceptable_number_of_task_failuresmaxtaskfailures_attribute"></a><a id="maxTaskFailures"></a> Acceptable Number of Task Failures&#8201;&#8212;&#8201;<code>maxTaskFailures</code> Attribute</h3>
<div class="paragraph">
<p>The acceptable number of task failures (<code>maxTaskFailures</code>) can be explicitly defined when <a href="#creating-instance">creating TaskSchedulerImpl instance</a> or based on <a href="spark-configuration-properties.html#spark.task.maxFailures" class="page">spark.task.maxFailures</a> setting that defaults to 4 failures.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is exclusively used when <a href="#submitTasks">submitting tasks</a> through <a href="spark-scheduler-TaskSetManager.adoc">TaskSetManager</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_cleaning_up_after_removing_executorremoveexecutor_internal_method"><a class="anchor" href="#_cleaning_up_after_removing_executorremoveexecutor_internal_method"></a><a id="removeExecutor"></a> Cleaning up After Removing Executor&#8201;&#8212;&#8201;<code>removeExecutor</code> Internal Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">removeExecutor(executorId: String, reason: ExecutorLossReason): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>removeExecutor</code> removes the <code>executorId</code> executor from the following <a href="#internal-registries">internal registries</a>: <a href="#executorIdToTaskCount">executorIdToTaskCount</a>, <code>executorIdToHost</code>, <code>executorsByHost</code>, and <code>hostsByRack</code>. If the affected hosts and racks are the last entries in <code>executorsByHost</code> and <code>hostsByRack</code>, appropriately, they are removed from the registries.</p>
</div>
<div class="paragraph">
<p>Unless <code>reason</code> is <code>LossReasonPending</code>, the executor is removed from <code>executorIdToHost</code> registry and <a href="spark-scheduler-Schedulable.adoc#executorLost">TaskSetManagers get notified</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The internal <code>removeExecutor</code> is called as part of <a href="#statusUpdate">statusUpdate</a> and <a href="spark-scheduler-TaskScheduler.adoc#executorLost">executorLost</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_handling_nearly_completed_sparkcontext_initializationpoststarthook_callback"><a class="anchor" href="#_handling_nearly_completed_sparkcontext_initializationpoststarthook_callback"></a><a id="postStartHook"></a> Handling Nearly-Completed SparkContext Initialization&#8201;&#8212;&#8201;<code>postStartHook</code> Callback</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">postStartHook(): Unit</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>postStartHook</code> is part of the <a href="spark-scheduler-TaskScheduler.html#postStartHook" class="page">TaskScheduler Contract</a> to notify a <a href="spark-scheduler-TaskScheduler.html" class="page">task scheduler</a> that the <code>SparkContext</code> (and hence the Spark application itself) is about to finish initialization.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>postStartHook</code> simply <a href="#waitBackendReady">waits until a scheduler backend is ready</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stopping_taskschedulerimplstop_method"><a class="anchor" href="#_stopping_taskschedulerimplstop_method"></a><a id="stop"></a> Stopping TaskSchedulerImpl&#8201;&#8212;&#8201;<code>stop</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">stop(): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>stop()</code> stops all the internal services, i.e. <a href="#task-scheduler-speculation"><code>task-scheduler-speculation</code> executor service</a>, <a href="spark-SchedulerBackend.adoc">SchedulerBackend</a>, <a href="spark-scheduler-TaskResultGetter.adoc">TaskResultGetter</a>, and <a href="#starvationTimer">starvationTimer</a> timer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_finding_default_level_of_parallelismdefaultparallelism_method"><a class="anchor" href="#_finding_default_level_of_parallelismdefaultparallelism_method"></a><a id="defaultParallelism"></a> Finding Default Level of Parallelism&#8201;&#8212;&#8201;<code>defaultParallelism</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">defaultParallelism(): Int</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>defaultParallelism</code> is part of <a href="spark-scheduler-TaskScheduler.adoc#defaultParallelism">TaskScheduler contract</a> as a hint for sizing jobs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>defaultParallelism</code> simply requests <a href="#backend">SchedulerBackend</a> for the <a href="spark-SchedulerBackend.adoc#defaultParallelism">default level of parallelism</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Default level of parallelism</strong> is a hint for sizing jobs that <code>SparkContext</code> <a href="spark-SparkContext.adoc#defaultParallelism">uses to create RDDs with the right number of partitions when not specified explicitly</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_tasks_of_taskset_for_executionsubmittasks_method"><a class="anchor" href="#_submitting_tasks_of_taskset_for_executionsubmittasks_method"></a><a id="submitTasks"></a> Submitting Tasks (of TaskSet) for Execution&#8201;&#8212;&#8201;<code>submitTasks</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">submitTasks(taskSet: TaskSet): Unit</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>submitTasks</code> is part of the <a href="spark-scheduler-TaskScheduler.html#submitTasks" class="page">TaskScheduler Contract</a> to submit the tasks (of the given <a href="spark-scheduler-TaskSet.html" class="page">TaskSet</a>) for execution.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In essence, <code>submitTasks</code> registers a new <a href="spark-scheduler-TaskSetManager.html" class="page">TaskSetManager</a> (for the given <a href="spark-scheduler-TaskSet.html" class="page">TaskSet</a>) and requests the <a href="#backend">SchedulerBackend</a> to <a href="spark-SchedulerBackend.html#reviveOffers" class="page">handle resource allocation offers (from the scheduling system)</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/taskschedulerImpl-submitTasks.png" alt="taskschedulerImpl submitTasks">
</div>
<div class="title">Figure 4. TaskSchedulerImpl.submitTasks</div>
</div>
<div class="paragraph">
<p>Internally, <code>submitTasks</code> first prints out the following INFO message to the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Adding task set [id] with [length] tasks</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>submitTasks</code> then <a href="#createTaskSetManager">creates a TaskSetManager</a> (for the given <a href="spark-scheduler-TaskSet.html" class="page">TaskSet</a> and the <a href="#maxTaskFailures">acceptable number of task failures</a>).</p>
</div>
<div class="paragraph">
<p><code>submitTasks</code> registers (<em>adds</em>) the <code>TaskSetManager</code> per <a href="spark-scheduler-TaskSet.html#stageId" class="page">stage</a> and <a href="spark-scheduler-TaskSet.html#stageAttemptId" class="page">stage attempt</a> IDs (of the <a href="spark-scheduler-TaskSet.html" class="page">TaskSet</a>) in the <a href="#taskSetsByStageIdAndAttempt">taskSetsByStageIdAndAttempt</a> internal registry.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="#taskSetsByStageIdAndAttempt">taskSetsByStageIdAndAttempt</a> internal registry tracks the <a href="spark-scheduler-TaskSetManager.html" class="page">TaskSetManagers</a> (that represent <a href="spark-scheduler-TaskSet.html" class="page">TaskSets</a>) per stage and stage attempts. In other words, there could be many <code>TaskSetManagers</code> for a single stage, each representing a unique stage attempt.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Not only could a task be retried (cf. <a href="#maxTaskFailures">acceptable number of task failures</a>), but also a single stage.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>submitTasks</code> makes sure that there is exactly one active <code>TaskSetManager</code> (with different <code>TaskSet</code>) across all the managers (for the stage). Otherwise, <code>submitTasks</code> throws an <code>IllegalStateException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>more than one active taskSet for stage [stage]: [TaskSet ids]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>TaskSetManager</code> is considered <strong>active</strong> when it is not a <strong>zombie</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>submitTasks</code> requests the <a href="#schedulableBuilder">SchedulableBuilder</a> to <a href="spark-scheduler-SchedulableBuilder.adoc#addTaskSetManager">add the TaskSetManager to the schedulable pool</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <a href="spark-scheduler-TaskScheduler.adoc#rootPool">schedulable pool</a> can be a single flat linked queue (in <a href="spark-scheduler-FIFOSchedulableBuilder.adoc">FIFO scheduling mode</a>) or a hierarchy of pools of <code>Schedulables</code> (in <a href="spark-scheduler-FairSchedulableBuilder.adoc">FAIR scheduling mode</a>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>submitTasks</code> <a href="#submitTasks-starvationTimer">schedules a starvation task</a> to make sure that the requested resources (i.e. CPU and memory) are assigned to the Spark application for a <a href="#isLocal">non-local environment</a> (the very first time the Spark application is started per <a href="#hasReceivedTask">hasReceivedTask</a> flag).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The very first time (<a href="#hasReceivedTask">hasReceivedTask</a> flag is <code>false</code>) in cluster mode only (i.e. <code>isLocal</code> of the <code>TaskSchedulerImpl</code> is <code>false</code>), <code>starvationTimer</code> is scheduled to execute after <a href="spark-configuration-properties.html#spark.starvation.timeout" class="page">spark.starvation.timeout</a>  to ensure that the requested resources, i.e. CPUs and memory, were assigned by a cluster manager.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After the first <a href="spark-configuration-properties.html#spark.starvation.timeout" class="page">spark.starvation.timeout</a> passes, the <a href="#hasReceivedTask">hasReceivedTask</a> internal flag is <code>true</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the end, <code>submitTasks</code> requests the <a href="#backend">SchedulerBackend</a> to <a href="spark-SchedulerBackend.html#reviveOffers" class="page">reviveOffers</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use <code>dag-scheduler-event-loop</code> thread to step through the code in a debugger.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_scheduling_starvation_task"><a class="anchor" href="#_scheduling_starvation_task"></a><a id="submitTasks-starvationTimer"></a> Scheduling Starvation Task</h4>
<div class="paragraph">
<p>Every time the starvation timer thread is executed and <code>hasLaunchedTask</code> flag is <code>false</code>, the following WARN message is printed out to the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>WARN Initial job has not accepted any resources; check your cluster UI to ensure that workers are registered and have sufficient resources</code></pre>
</div>
</div>
<div class="paragraph">
<p>Otherwise, when the <code>hasLaunchedTask</code> flag is <code>true</code> the timer thread cancels itself.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_tasksetmanagercreatetasksetmanager_method"><a class="anchor" href="#_creating_tasksetmanagercreatetasksetmanager_method"></a><a id="createTaskSetManager"></a> Creating TaskSetManager&#8201;&#8212;&#8201;<code>createTaskSetManager</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">createTaskSetManager(taskSet: TaskSet, maxTaskFailures: Int): TaskSetManager</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>createTaskSetManager</code> <a href="spark-scheduler-TaskSetManager.adoc#creating-instance">creates a <code>TaskSetManager</code></a> (passing on the reference to <code>TaskSchedulerImpl</code>, the input <code>taskSet</code> and <code>maxTaskFailures</code>, and optional <code>BlacklistTracker</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>createTaskSetManager</code> uses the optional <a href="#blacklistTrackerOpt">BlacklistTracker</a> that is specified when <a href="#creating-instance"><code>TaskSchedulerImpl</code> is created</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>createTaskSetManager</code> is used exclusively when <a href="#submitTasks"><code>TaskSchedulerImpl</code> submits tasks (for a given <code>TaskSet</code>)</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_notifying_tasksetmanager_that_task_failedhandlefailedtask_method"><a class="anchor" href="#_notifying_tasksetmanager_that_task_failedhandlefailedtask_method"></a><a id="handleFailedTask"></a> Notifying TaskSetManager that Task Failed&#8201;&#8212;&#8201;<code>handleFailedTask</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">handleFailedTask(
  taskSetManager: TaskSetManager,
  tid: Long,
  taskState: TaskState,
  reason: TaskFailedReason): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>handleFailedTask</code> <a href="spark-scheduler-TaskSetManager.adoc#handleFailedTask">notifies <code>taskSetManager</code> that <code>tid</code> task has failed</a> and, only when <a href="spark-scheduler-TaskSetManager.adoc#zombie-state"><code>taskSetManager</code> is not in zombie state</a> and <code>tid</code> is not in <code>KILLED</code> state, <a href="spark-SchedulerBackend.adoc#reviveOffers">requests <code>SchedulerBackend</code> to revive offers</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>handleFailedTask</code> is called when <a href="spark-scheduler-TaskResultGetter.adoc#enqueueSuccessfulTask"><code>TaskResultGetter</code> deserializes a <code>TaskFailedReason</code></a> for a failed task.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_tasksetfinished_method"><a class="anchor" href="#_tasksetfinished_method"></a><a id="taskSetFinished"></a> <code>taskSetFinished</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">taskSetFinished(manager: TaskSetManager): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>taskSetFinished</code> looks all <a href="spark-scheduler-TaskSet.adoc">TaskSet</a>s up by the stage id (in <a href="#taskSetsByStageIdAndAttempt">taskSetsByStageIdAndAttempt</a> registry) and removes the stage attempt from them, possibly with removing the entire stage record from <code>taskSetsByStageIdAndAttempt</code> registry completely (if there are no other attempts registered).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/taskschedulerimpl-tasksetmanager-tasksetfinished.png" alt="taskschedulerimpl tasksetmanager tasksetfinished">
</div>
<div class="title">Figure 5. TaskSchedulerImpl.taskSetFinished is called when all tasks are finished</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <code>TaskSetManager</code> manages a <code>TaskSet</code> for a stage.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>taskSetFinished</code> then <a href="spark-scheduler-Pool.adoc#removeSchedulable">removes <code>manager</code> from the parent&#8217;s schedulable pool</a>.</p>
</div>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Removed TaskSet [id], whose tasks have all completed, from pool [name]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>taskSetFinished</code> method is called when <a href="spark-scheduler-TaskSetManager.adoc#maybeFinishTaskSet"><code>TaskSetManager</code> has received the results of all the tasks in a <code>TaskSet</code></a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_notifying_dagscheduler_about_new_executorexecutoradded_method"><a class="anchor" href="#_notifying_dagscheduler_about_new_executorexecutoradded_method"></a><a id="executorAdded"></a> Notifying DAGScheduler About New Executor&#8201;&#8212;&#8201;<code>executorAdded</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">executorAdded(execId: String, host: String)</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>executorAdded</code> just <a href="spark-scheduler-DAGScheduler.adoc#executorAdded">notifies <code>DAGScheduler</code> that an executor was added</a>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Image with a call from TaskSchedulerImpl to DAGScheduler, please.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>executorAdded</code> uses <a href="#dagScheduler">DAGScheduler</a> that was given when <a href="#setDAGScheduler">setDAGScheduler</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_waiting_until_schedulerbackend_is_readywaitbackendready_internal_method"><a class="anchor" href="#_waiting_until_schedulerbackend_is_readywaitbackendready_internal_method"></a><a id="waitBackendReady"></a> Waiting Until SchedulerBackend is Ready&#8201;&#8212;&#8201;<code>waitBackendReady</code> Internal Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">waitBackendReady(): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>waitBackendReady</code> waits until the <a href="#backend">SchedulerBackend</a> is <a href="spark-SchedulerBackend.html#isReady" class="page">ready</a>. If it is, <code>waitBackendReady</code> returns immediately. Otherwise, <code>waitBackendReady</code> keeps checking every <code>100</code> milliseconds (hardcoded) or the <a href="#sc">SparkContext</a> is <a href="spark-SparkContext.html#stopped" class="page">stopped</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <code>SchedulerBackend</code> is <a href="spark-SchedulerBackend.html#isReady" class="page">ready</a> by default.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the <code>SparkContext</code> happens to be stopped while waiting, <code>waitBackendReady</code> throws an <code>IllegalStateException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Spark context stopped while waiting for backend</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>waitBackendReady</code> is used exclusively when <code>TaskSchedulerImpl</code> is requested to <a href="#postStartHook">handle a notification that SparkContext is about to be fully initialized</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_taskdescriptions_for_available_executor_resource_offers_with_cpu_coresresourceoffers_method"><a class="anchor" href="#_creating_taskdescriptions_for_available_executor_resource_offers_with_cpu_coresresourceoffers_method"></a><a id="resourceOffers"></a> Creating TaskDescriptions For Available Executor Resource Offers (with CPU Cores)&#8201;&#8212;&#8201;<code>resourceOffers</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">resourceOffers(offers: Seq[WorkerOffer]): Seq[Seq[TaskDescription]]</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>resourceOffers</code> takes the resources <code>offers</code> (as <a href="#WorkerOffer">WorkerOffers</a>) and generates a collection of tasks (as <a href="spark-scheduler-TaskDescription.adoc">TaskDescription</a>) to launch (given the resources available).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="#WorkerOffer">WorkerOffer</a> represents a resource offer with CPU cores free to use on an executor.
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/taskscheduler-resourceOffers.png" alt="taskscheduler resourceOffers">
</div>
<div class="title">Figure 6. Processing Executor Resource Offers</div>
</div>
<div class="paragraph">
<p>Internally, <code>resourceOffers</code> first updates <a href="#hostToExecutors">hostToExecutors</a> and <a href="#executorIdToHost">executorIdToHost</a> lookup tables to record new hosts and executors (given the input <code>offers</code>).</p>
</div>
<div class="paragraph">
<p>For new executors (not in <a href="#executorIdToRunningTaskIds">executorIdToRunningTaskIds</a>) <code>resourceOffers</code> <a href="#executorAdded">notifies <code>DAGScheduler</code> that an executor was added</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>TaskSchedulerImpl</code> uses <code>resourceOffers</code> to track active executors.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME a picture with <code>executorAdded</code> call from TaskSchedulerImpl to DAGScheduler.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>resourceOffers</code> requests <code>BlacklistTracker</code> to <code>applyBlacklistTimeout</code> and filters out offers on blacklisted nodes and executors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>resourceOffers</code> uses the optional <a href="#blacklistTrackerOpt">BlacklistTracker</a> that was given when <a href="#creating-instance"><code>TaskSchedulerImpl</code> was created</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Expand on blacklisting
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>resourceOffers</code> then randomly shuffles offers (to evenly distribute tasks across executors and avoid over-utilizing some executors) and initializes the local data structures <code>tasks</code> and <code>availableCpus</code> (as shown in the figure below).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/TaskSchedulerImpl-resourceOffers-internal-structures.png" alt="TaskSchedulerImpl resourceOffers internal structures">
</div>
<div class="title">Figure 7. Internal Structures of resourceOffers with 5 WorkerOffers (with 4, 2, 0, 3, 2 free cores)</div>
</div>
<div class="paragraph">
<p><code>resourceOffers</code> <a href="spark-scheduler-Pool.adoc#getSortedTaskSetQueue">takes <code>TaskSets</code> in scheduling order</a> from <a href="spark-scheduler-TaskScheduler.adoc#rootPool">top-level Schedulable Pool</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/TaskSchedulerImpl-resourceOffers-rootPool-getSortedTaskSetQueue.png" alt="TaskSchedulerImpl resourceOffers rootPool getSortedTaskSetQueue">
</div>
<div class="title">Figure 8. TaskSchedulerImpl Requesting TaskSets (as TaskSetManagers) from Root Pool</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>rootPool</code> is configured when <a href="#initialize"><code>TaskSchedulerImpl</code> is initialized</a>.</p>
</div>
<div class="paragraph">
<p><code>rootPool</code> is part of the <a href="spark-scheduler-TaskScheduler.adoc#rootPool">TaskScheduler Contract</a> and exclusively managed by <a href="spark-scheduler-SchedulableBuilder.adoc">SchedulableBuilders</a>, i.e. <a href="spark-scheduler-FIFOSchedulableBuilder.adoc">FIFOSchedulableBuilder</a> and <a href="spark-scheduler-FairSchedulableBuilder.adoc">FairSchedulableBuilder</a> (that  <a href="spark-scheduler-SchedulableBuilder.adoc#addTaskSetManager">manage registering TaskSetManagers with the root pool</a>).</p>
</div>
<div class="paragraph">
<p><a href="spark-scheduler-TaskSetManager.adoc">TaskSetManager</a> manages execution of the tasks in a single <a href="spark-scheduler-TaskSet.adoc">TaskSet</a> that represents a single <a href="spark-scheduler-Stage.adoc">Stage</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For every <code>TaskSetManager</code> (in scheduling order), you should see the following DEBUG message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>parentName: [name], name: [name], runningTasks: [count]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Only if a new executor was added, <code>resourceOffers</code> <a href="spark-scheduler-TaskSetManager.adoc#executorAdded">notifies every <code>TaskSetManager</code> about the change</a> (to recompute locality preferences).</p>
</div>
<div class="paragraph">
<p><code>resourceOffers</code> then takes every <code>TaskSetManager</code> (in scheduling order) and offers them each node in increasing order of locality levels (per <a href="spark-scheduler-TaskSetManager.adoc#computeValidLocalityLevels">TaskSetManager&#8217;s valid locality levels</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <code>TaskSetManager</code> <a href="spark-scheduler-TaskSetManager.adoc##computeValidLocalityLevels">computes locality levels of the tasks</a> it manages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For every <code>TaskSetManager</code> and the <code>TaskSetManager</code>'s valid locality level, <code>resourceOffers</code> tries to <a href="#resourceOfferSingleTaskSet">find tasks to schedule (on executors)</a> as long as the <code>TaskSetManager</code> manages to launch a task (given the locality level).</p>
</div>
<div class="paragraph">
<p>If <code>resourceOffers</code> did not manage to offer resources to a <code>TaskSetManager</code> so it could launch any task, <code>resourceOffers</code> <a href="spark-scheduler-TaskSetManager.adoc#abortIfCompletelyBlacklisted">requests the <code>TaskSetManager</code> to abort the <code>TaskSet</code> if completely blacklisted</a>.</p>
</div>
<div class="paragraph">
<p>When <code>resourceOffers</code> managed to launch a task, the internal <a href="#hasLaunchedTask">hasLaunchedTask</a> flag gets enabled (that effectively means what the name says <em>"there were executors and I managed to launch a task"</em>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>resourceOffers</code> is used when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="spark-CoarseGrainedSchedulerBackend-DriverEndpoint.adoc#makeOffers"><code>CoarseGrainedSchedulerBackend</code> (via RPC endpoint) makes executor resource offers</a></p>
</li>
<li>
<p><a href="local/spark-LocalEndpoint.adoc#reviveOffers"><code>LocalEndpoint</code> revives resource offers</a></p>
</li>
<li>
<p>Spark on Mesos' <code>MesosFineGrainedSchedulerBackend</code> does <code>resourceOffers</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_finding_tasks_from_tasksetmanager_to_schedule_on_executorsresourceoffersingletaskset_internal_method"><a class="anchor" href="#_finding_tasks_from_tasksetmanager_to_schedule_on_executorsresourceoffersingletaskset_internal_method"></a><a id="resourceOfferSingleTaskSet"></a> Finding Tasks from TaskSetManager to Schedule on Executors&#8201;&#8212;&#8201;<code>resourceOfferSingleTaskSet</code> Internal Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">resourceOfferSingleTaskSet(
  taskSet: TaskSetManager,
  maxLocality: TaskLocality,
  shuffledOffers: Seq[WorkerOffer],
  availableCpus: Array[Int],
  tasks: Seq[ArrayBuffer[TaskDescription]]): Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>resourceOfferSingleTaskSet</code> takes every <code>WorkerOffer</code> (from the input <code>shuffledOffers</code>) and (only if the number of available CPU cores (using the input <code>availableCpus</code>) is at least <a href="spark-configuration-properties.html#spark.task.cpus" class="page">spark.task.cpus</a>) <a href="spark-scheduler-TaskSetManager.adoc#resourceOffer">requests <code>TaskSetManager</code> (as the input <code>taskSet</code>) to find a <code>Task</code> to execute (given the resource offer)</a> (as an executor, a host, and the input <code>maxLocality</code>).</p>
</div>
<div class="paragraph">
<p><code>resourceOfferSingleTaskSet</code> adds the task to the input <code>tasks</code> collection.</p>
</div>
<div class="paragraph">
<p><code>resourceOfferSingleTaskSet</code> records the task id and <code>TaskSetManager</code> in the following registries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#taskIdToTaskSetManager">taskIdToTaskSetManager</a></p>
</li>
<li>
<p><a href="#taskIdToExecutorId">taskIdToExecutorId</a></p>
</li>
<li>
<p><a href="#executorIdToRunningTaskIds">executorIdToRunningTaskIds</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>resourceOfferSingleTaskSet</code> decreases <a href="spark-configuration-properties.html#spark.task.cpus" class="page">spark.task.cpus</a> from the input <code>availableCpus</code> (for the <code>WorkerOffer</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>resourceOfferSingleTaskSet</code> makes sure that the number of available CPU cores (in the input <code>availableCpus</code> per <code>WorkerOffer</code>) is at least <code>0</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If there is a <code>TaskNotSerializableException</code>, you should see the following ERROR in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ERROR Resource offer failed, task set [name] was not serializable</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>resourceOfferSingleTaskSet</code> returns whether a task was launched or not.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>resourceOfferSingleTaskSet</code> is used when <code>TaskSchedulerImpl</code> <a href="#resourceOffers">creates <code>TaskDescriptions</code> for available executor resource offers (with CPU cores)</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_tasklocalitytask_locality_preference"><a class="anchor" href="#_tasklocalitytask_locality_preference"></a><a id="TaskLocality"></a> TaskLocality&#8201;&#8212;&#8201;Task Locality Preference</h3>
<div class="paragraph">
<p><code>TaskLocality</code> represents a task locality preference and can be one of the following (from most localized to the widest):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>PROCESS_LOCAL</code></p>
</li>
<li>
<p><code>NODE_LOCAL</code></p>
</li>
<li>
<p><code>NO_PREF</code></p>
</li>
<li>
<p><code>RACK_LOCAL</code></p>
</li>
<li>
<p><code>ANY</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_workerofferfree_cpu_cores_on_executor"><a class="anchor" href="#_workerofferfree_cpu_cores_on_executor"></a><a id="WorkerOffer"></a> WorkerOffer&#8201;&#8212;&#8201;Free CPU Cores on Executor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">WorkerOffer(executorId: String, host: String, cores: Int)</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>WorkerOffer</code> represents a resource offer with free CPU <code>cores</code> available on an <code>executorId</code> executor on a <code>host</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_workerremoved_method"><a class="anchor" href="#_workerremoved_method"></a><a id="workerRemoved"></a> <code>workerRemoved</code> Method</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">workerRemoved(workerId: String, host: String, message: String): Unit</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>workerRemoved</code> is part of the <a href="spark-scheduler-TaskScheduler.html#workerRemoved" class="page">TaskScheduler Contract</a> to&#8230;&#8203;FIXME.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>workerRemoved</code> prints out the following INFO message to the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Handle removed worker [workerId]: [message]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the end, <code>workerRemoved</code> simply requests the <a href="#dagScheduler">DAGScheduler</a> to <a href="spark-scheduler-DAGScheduler.html#workerRemoved" class="page">handle the worker removed</a>.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
