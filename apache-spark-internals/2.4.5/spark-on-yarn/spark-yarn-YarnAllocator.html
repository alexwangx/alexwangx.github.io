<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: The Internals Of Apache Spark</title>
    <link rel="canonical" href="http://alexwangx.github.io/apache-spark-internals/2.4.5/apache-spark-internals/latest/spark-on-yarn/spark-yarn-YarnAllocator.html">
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-86782445-1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-86782445-1')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="http://alexwangx.github.io/apache-spark-internals/2.4.5">The Internals Of Apache Spark</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="apache-spark-internals" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Apache Spark</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/index.html">Resilient Distributed Dataset</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/RDD.html">RDD</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-CoGroupedRDD.html">CoGroupedRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-HadoopRDD.html">HadoopRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-MapPartitionsRDD.html">MapPartitionsRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-NewHadoopRDD.html">NewHadoopRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-OrderedRDDFunctions.html">OrderedRDDFunctions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-ParallelCollectionRDD.html">ParallelCollectionRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/CheckpointRDD.html">CheckpointRDD</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../rdd/ReliableCheckpointRDD.html">ReliableCheckpointRDD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/ShuffledRDD.html">ShuffledRDD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-SubtractedRDD.html">SubtractedRDD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/spark-rdd-operations.html">Operators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/spark-rdd-transformations.html">Transformations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../rdd/PairRDDFunctions.html">PairRDDFunctions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-actions.html">Actions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rdd/spark-rdd-lineage.html">RDD Lineage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rdd/spark-rdd-caching.html">Caching and Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/spark-rdd-partitions.html">Partitions and Partitioning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-Partition.html">Partition</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/Partitioner.html">Partitioner</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/HashPartitioner.html">HashPartitioner</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/RangePartitioner.html">RangePartitioner</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/RDDCheckpointData.html">RDDCheckpointData</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/LocalRDDCheckpointData.html">LocalRDDCheckpointData</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/ReliableRDDCheckpointData.html">ReliableRDDCheckpointData</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rdd/spark-rdd-shuffle.html">Shuffling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rdd/spark-rdd-Dependency.html">Dependencies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/spark-rdd-NarrowDependency.html">NarrowDependency</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rdd/ShuffleDependency.html">ShuffleDependency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rdd/Aggregator.html">Aggregator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/index.html">Scheduler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/DAGScheduler.html">DAGScheduler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/DAGSchedulerEvent.html">DAGScheduler Events</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/DAGSchedulerEventProcessLoop.html">DAGScheduler Event Bus</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/Stage.html">Stage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/ResultStage.html">ResultStage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/ShuffleMapStage.html">ShuffleMapStage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/MapOutputTracker.html">MapOutputTracker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/MapOutputTrackerMaster.html">MapOutputTrackerMaster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../scheduler/ShuffleStatus.html">ShuffleStatus</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../scheduler/MapOutputTrackerMasterEndpoint.html">MapOutputTrackerMasterEndpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/MapOutputTrackerWorker.html">MapOutputTrackerWorker</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-StageInfo.html">StageInfo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/spark-scheduler-JobListener.html">JobListener</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/spark-scheduler-JobWaiter.html">JobWaiter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/TaskScheduler.html">TaskScheduler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/TaskSchedulerImpl.html">TaskSchedulerImpl</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/SchedulerBackend.html">SchedulerBackend</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/CoarseGrainedSchedulerBackend.html">CoarseGrainedSchedulerBackend</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../scheduler/CoarseGrainedSchedulerBackend-DriverEndpoint.html">DriverEndpoint</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/Task.html">Task</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/ShuffleMapTask.html">ShuffleMapTask</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/ResultTask.html">ResultTask</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/TaskSet.html">TaskSet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/TaskSetManager.html">TaskSetManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-ActiveJob.html">Jobs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/spark-scheduler-SchedulableBuilder.html">SchedulableBuilder</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/spark-scheduler-FIFOSchedulableBuilder.html">FIFOSchedulableBuilder</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/spark-scheduler-FairSchedulableBuilder.html">FairSchedulableBuilder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/spark-scheduler-Schedulable.html">Schedulable Entities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/spark-scheduler-Pool.html">Schedulable Pool</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-SchedulingMode.html">Scheduling Mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-TaskInfo.html">TaskInfo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/MapStatus.html">MapStatus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-TaskDescription.html">TaskDescription</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-taskschedulerimpl-speculative-execution.html">Speculative Execution of Tasks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/TaskResultGetter.html">TaskResultGetter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scheduler/spark-TaskContext.html">TaskContext</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/spark-BarrierTaskContext.html">BarrierTaskContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../scheduler/spark-TaskContextImpl.html">TaskContextImpl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-TaskResult.html">TaskResults</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/spark-scheduler-TaskSetBlacklist.html">TaskSetBlacklist</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/OutputCommitCoordinator.html">OutputCommitCoordinator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/TaskLocation.html">TaskLocation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scheduler/ExternalClusterManager.html">ExternalClusterManager</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../memory/index.html">Memory System</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../memory/MemoryManager.html">MemoryManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/StaticMemoryManager.html">StaticMemoryManager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/UnifiedMemoryManager.html">UnifiedMemoryManager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../memory/MemoryPool.html">MemoryPool</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/ExecutionMemoryPool.html">ExecutionMemoryPool</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/StorageMemoryPool.html">StorageMemoryPool</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../memory/TaskMemoryManager.html">TaskMemoryManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../memory/MemoryConsumer.html">MemoryConsumer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/BytesToBytesMap.html">BytesToBytesMap</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/UnsafeSorterSpillReader.html">UnsafeSorterSpillReader</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/UnsafeExternalSorter.html">UnsafeExternalSorter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../memory/UnsafeInMemorySorter.html">UnsafeInMemorySorter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../memory/UnsafeSorterSpillWriter.html">UnsafeSorterSpillWriter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Storage System</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/BlockManager.html">BlockManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/DiskBlockManager.html">DiskBlockManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/DiskStore.html">DiskStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-BlockDataManager.html">BlockDataManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-BlockId.html">BlockId</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../storage/spark-BlockInfoManager.html">BlockInfoManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/spark-BlockInfo.html">BlockInfo</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../storage/BlockManagerMaster.html">BlockManagerMaster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/spark-blockmanager-BlockManagerMasterEndpoint.html">BlockManagerMasterEndpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/MemoryStore.html">MemoryStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-BlockEvictionHandler.html">BlockEvictionHandler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-blockmanager-BlockManagerSlaveEndpoint.html">BlockManagerSlaveEndpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/DiskBlockObjectWriter.html">DiskBlockObjectWriter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-BlockManager-BlockManagerSource.html">BlockManagerSource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-BlockManager-ShuffleMetricsSource.html">ShuffleMetricsSource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/spark-blockmanager-StorageStatus.html">StorageStatus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/ShuffleBlockFetcherIterator.html">ShuffleBlockFetcherIterator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/RDDInfo.html">RDDInfo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/StorageLevel.html">StorageLevel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/demo-diskblockmanager-and-block-data.html">Demo: DiskBlockManager and Block Data</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/index.html">Shuffle System</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/ShuffleManager.html">ShuffleManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/SortShuffleManager.html">SortShuffleManager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/spark-shuffle-ShuffleHandle.html">ShuffleHandle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/spark-shuffle-BaseShuffleHandle.html">BaseShuffleHandle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/BypassMergeSortShuffleHandle.html">BypassMergeSortShuffleHandle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/SerializedShuffleHandle.html">SerializedShuffleHandle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/spark-shuffle-ShuffleReader.html">ShuffleReader</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/BlockStoreShuffleReader.html">BlockStoreShuffleReader</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/ShuffleWriter.html">ShuffleWriter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/BypassMergeSortShuffleWriter.html">BypassMergeSortShuffleWriter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/SortShuffleWriter.html">SortShuffleWriter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/UnsafeShuffleWriter.html">UnsafeShuffleWriter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../shuffle/ShuffleExternalSorter.html">ShuffleExternalSorter</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../shuffle/ShuffleInMemorySorter.html">ShuffleInMemorySorter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/ShuffleBlockResolver.html">ShuffleBlockResolver</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/IndexShuffleBlockResolver.html">IndexShuffleBlockResolver</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../shuffle/FetchFailedException.html">FetchFailedException</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../shuffle/Spillable.html">Spillable</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/ExternalAppendOnlyMap.html">ExternalAppendOnlyMap</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../shuffle/ExternalSorter.html">ExternalSorter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../spark-overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../SparkConf.html">SparkConf</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-properties.html">Spark Properties and spark-defaults.conf Properties File</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-deploy-mode.html">Deploy Mode</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../SparkContext.html">SparkContext</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-HeartbeatReceiver.html">HeartbeatReceiver RPC Endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-SparkContext-creating-instance-internals.html">Inside Creating SparkContext</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-sparkcontext-ConsoleProgressBar.html">ConsoleProgressBar</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-sparkcontext-SparkStatusTracker.html">SparkStatusTracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-sparkcontext-local-properties.html">Local Properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../rdd-checkpointing.html">RDD Checkpointing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-dynamic-allocation.html">Dynamic Allocation of Executors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-ExecutorAllocationManager.html">ExecutorAllocationManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-service-ExecutorAllocationClient.html">ExecutorAllocationClient</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-service-ExecutorAllocationManagerSource.html">ExecutorAllocationManagerSource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Shared Variables</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-broadcast.html">Broadcast variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-accumulators.html">Accumulators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-AccumulatorContext.html">AccumulatorContext</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../spark-data-locality.html">Data Locality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-architecture.html">Spark Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-driver.html">Driver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-master.html">Master</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-workers.html">Workers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../configuration-properties.html">Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../spark-anatomy-spark-application.html">Anatomy of Spark Application</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Internal IO</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-internal-io-SparkHadoopWriter.html">SparkHadoopWriter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-internal-io-FileCommitProtocol.html">FileCommitProtocol</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-internal-io-HadoopMapReduceCommitProtocol.html">HadoopMapReduceCommitProtocol</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-internal-io-HadoopMapRedCommitProtocol.html">HadoopMapRedCommitProtocol</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-internal-io-HadoopWriteConfigUtil.html">HadoopWriteConfigUtil</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-internal-io-HadoopMapReduceWriteConfigUtil.html">HadoopMapReduceWriteConfigUtil</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-internal-io-HadoopMapRedWriteConfigUtil.html">HadoopMapRedWriteConfigUtil</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Misc</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-core-AppStatusStore.html">AppStatusStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-core-AppStatusPlugin.html">AppStatusPlugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-core-KVStore.html">KVStore</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-core-KVStoreView.html">KVStoreView</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-core-ElementTrackingStore.html">ElementTrackingStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-core-InMemoryStore.html">InMemoryStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-core-LevelDB.html">LevelDB</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-InterruptibleIterator.html">InterruptibleIterator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-Utils.html">Utils Helper Object</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-barrier-execution-mode.html">Barrier Execution Mode</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-RDDBarrier.html">RDDBarrier</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-webui-security.html">Securing Web UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-deployment-environments.html">Deployment Environments</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-cluster.html">Spark on cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Monitoring, Tuning, Debugging and Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-tuning.html">Performance Tuning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-scheduler-SparkListener.html">SparkListener</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkListener-AppStatusListener.html">AppStatusListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkListener-ExecutorAllocationListener.html">ExecutorAllocationListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkListener-SpillListener.html">SpillListener</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkListener-StatsReportListener.html">StatsReportListener</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-scheduler-LiveListenerBus.html">LiveListenerBus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-SparkListenerBus.html">SparkListenerBus</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkListenerBus-AsyncEventQueue.html">AsyncEventQueue</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkListenerBus-ReplayListenerBus.html">ReplayListenerBus</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-JsonProtocol.html">JsonProtocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-debugging.html">Debugging Spark</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Varia</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../varia/spark-building-from-sources.html">Building Apache Spark from Sources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../varia/spark-hadoop.html">Spark and Hadoop</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-SparkHadoopUtil.html">SparkHadoopUtil</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../varia/spark-inmemory-filesystems.html">Spark and software in-memory file systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../varia/spark-others.html">Spark and The Others</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../varia/spark-deeplearning.html">Distributed Deep Learning on Spark</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../varia/spark-packages.html">Spark Packages</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-tips-and-tricks.html">Spark Tips and Tricks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-tips-and-tricks-access-private-members-spark-shell.html">Access private members in Scala in Spark shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-tips-and-tricks-sparkexception-task-not-serializable.html">SparkException: Task not serializable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-tips-and-tricks-running-spark-windows.html">Running Spark Applications on Windows</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/SparkEnv.html">SparkEnv</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/BroadcastManager.html">BroadcastManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/BroadcastFactory.html">BroadcastFactory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/TorrentBroadcastFactory.html">TorrentBroadcastFactory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/TorrentBroadcast.html">TorrentBroadcast</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/ContextCleaner.html">ContextCleaner</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/CleanerListener.html">CleanerListener</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/ShuffleClient.html">ShuffleClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/BlockTransferService.html">BlockTransferService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/ExternalShuffleClient.html">ExternalShuffleClient</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/NettyBlockTransferService.html">NettyBlockTransferService</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/NettyBlockRpcServer.html">NettyBlockRpcServer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/BlockFetchingListener.html">BlockFetchingListener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/RetryingBlockFetcher.html">RetryingBlockFetcher</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../core/BlockFetchStarter.html">BlockFetchStarter</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../executor/Executor.html">Executor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executor/TaskRunner.html">TaskRunner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executor/ExecutorSource.html">ExecutorSource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../executor/ExecutorBackend.html">ExecutorBackend</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executor/CoarseGrainedExecutorBackend.html">CoarseGrainedExecutorBackend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../executor/TaskMetrics.html">TaskMetrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executor/ShuffleWriteMetrics.html">ShuffleWriteMetrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executor/ShuffleReadMetrics.html">ShuffleReadMetrics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rpc/index.html">RPC System</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rpc/RpcEnv.html">RpcEnv</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rpc/NettyRpcEnv.html">NettyRpcEnv</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../rpc/NettyStreamManager.html">NettyStreamManager</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcEnvConfig.html">RpcEnvConfig</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcEndpoint.html">RpcEndpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcEndpointRef.html">RpcEndpointRef</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcAddress.html">RpcAddress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcEndpointAddress.html">RpcEndpointAddress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rpc/RpcEnvFactory.html">RpcEnvFactory</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rpc/NettyRpcEnvFactory.html">NettyRpcEnvFactory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcEnvFileServer.html">RpcEnvFileServer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/spark-rpc-netty.html">Netty-based RpcEnv</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rpc/RpcUtils.html">RpcUtils</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Network System</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../network/TransportContext.html">TransportContext</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../network/MessageHandler.html">MessageHandler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../network/TransportRequestHandler.html">TransportRequestHandler</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../network/TransportConf.html">TransportConf</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../network/SparkTransportConf.html">SparkTransportConf</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network/TransportClientFactory.html">TransportClientFactory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network/TransportServer.html">TransportServer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network/RpcHandler.html">RpcHandler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../network/StreamManager.html">StreamManager</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../network/OneForOneStreamManager.html">OneForOneStreamManager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network/ManagedBuffer.html">ManagedBuffer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network/RpcResponseCallback.html">RpcResponseCallback</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploy/ExternalShuffleService.html">External Shuffle Service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploy/ExternalShuffleBlockHandler.html">ExternalShuffleBlockHandler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploy/ExternalShuffleBlockResolver.html">ExternalShuffleBlockResolver</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../io/CompressionCodec.html">CompressionCodec</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../serializer/index.html">Serialization System</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serializer/SerializerManager.html">SerializerManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serializer/Serializer.html">Serializer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serializer/SerializerInstance.html">SerializerInstance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serializer/SerializationStream.html">SerializationStream</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serializer/DeserializationStream.html">DeserializationStream</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools/spark-shell.html">Spark Shell (spark-shell)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tools/spark-submit.html">Spark Submit (spark-submit)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tools/spark-submit-SparkSubmitArguments.html">SparkSubmitArguments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tools/spark-submit-SparkSubmitOptionParser.html">SparkSubmitOptionParser</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tools/spark-submit-SparkSubmitCommandBuilder.html">SparkSubmitCommandBuilder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tools/spark-class.html">spark-class shell script</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tools/spark-AbstractCommandBuilder.html">AbstractCommandBuilder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools/spark-SparkLauncher.html">SparkLauncher</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/index.html">Web UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-jobs.html">Jobs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-JobsTab.html">JobsTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../webui/spark-webui-AllJobsPage.html">AllJobsPage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../webui/spark-webui-JobPage.html">JobPage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-stages.html">Stages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-storage.html">Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-environment.html">Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-executors.html">Executors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-StagesTab.html">StagesTab&#8201;&#8212;&#8201;Stages for All Jobs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-AllStagesPage.html">AllStagesPage&#8201;&#8212;&#8201;Stages for All Jobs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-StagePage.html">StagePage&#8201;&#8212;&#8201;Stage Details</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-PoolPage.html">PoolPage&#8201;&#8212;&#8201;Pool Details</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-StorageTab.html">StorageTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-StoragePage.html">StoragePage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-RDDPage.html">RDDPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-EnvironmentTab.html">EnvironmentTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-EnvironmentPage.html">EnvironmentPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-ExecutorsTab.html">ExecutorsTab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-ExecutorsPage.html">ExecutorsPage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-ExecutorThreadDumpPage.html">ExecutorThreadDumpPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-SparkUI.html">SparkUI&#8201;&#8212;&#8201;Web UI of Spark Application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-SparkUITab.html">SparkUITab</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-BlockStatusListener.html">BlockStatusListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-EnvironmentListener.html">EnvironmentListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-executors-ExecutorsListener.html">ExecutorsListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-JobProgressListener.html">JobProgressListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-StorageStatusListener.html">StorageStatusListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-StorageListener.html">StorageListener&#8201;&#8212;&#8201;Spark Listener for Tracking Persistence Status of RDD Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-RDDOperationGraphListener.html">RDDOperationGraphListener Spark Listener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-webui-WebUI.html">WebUI&#8201;&#8212;&#8201;Framework For Web UIs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-WebUIPage.html">WebUIPage&#8201;&#8212;&#8201;Contract of Pages in Web UI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-webui-WebUITab.html">WebUITab&#8201;&#8212;&#8201;Contract of Tabs in Web UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-RDDStorageInfo.html">RDDStorageInfo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../webui/spark-core-LiveEntity.html">LiveEntity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../webui/spark-core-LiveRDD.html">LiveRDD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-UIUtils.html">UIUtils</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-JettyUtils.html">JettyUtils</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../webui/spark-webui-properties.html">web UI Configuration Properties</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../metrics/index.html">Spark Metrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../metrics/spark-metrics-MetricsSystem.html">MetricsSystem</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../metrics/spark-metrics-MetricsConfig.html">MetricsConfig</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../metrics/spark-metrics-Source.html">Source</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../metrics/spark-scheduler-DAGSchedulerSource.html">DAGSchedulerSourcer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../metrics/spark-metrics-Sink.html">Sink</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../metrics/spark-metrics-MetricsServlet.html">MetricsServlet JSON Metrics Sink</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../metrics/spark-metrics-properties.html">Metrics Configuration Properties</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/index.html">Spark MLlib</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-pipelines.html">ML Pipelines (spark.ml)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-Pipeline.html">Pipeline</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-PipelineStage.html">PipelineStage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-transformers.html">Transformers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-Transformer.html">Transformer</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-transformers-Tokenizer.html">Tokenizer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-estimators.html">Estimators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-Estimator.html">Estimator</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-StringIndexer.html">StringIndexer</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-KMeans.html">KMeans</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-TrainValidationSplit.html">TrainValidationSplit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-Predictor.html">Predictor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-RandomForestRegressor.html">RandomForestRegressor</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-Regressor.html">Regressor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-LinearRegression.html">LinearRegression</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-Classifier.html">Classifier</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-RandomForestClassifier.html">RandomForestClassifier</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../spark-mllib/spark-mllib-DecisionTreeClassifier.html">DecisionTreeClassifier</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-models.html">Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-Model.html">Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-Evaluator.html">Evaluator&#8201;&#8212;&#8201;ML Pipeline Component for Model Scoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-BinaryClassificationEvaluator.html">BinaryClassificationEvaluator&#8201;&#8212;&#8201;Evaluator of Binary Classification Models</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-ClusteringEvaluator.html">ClusteringEvaluator&#8201;&#8212;&#8201;Evaluator of Clustering Models</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-MulticlassClassificationEvaluator.html">MulticlassClassificationEvaluator&#8201;&#8212;&#8201;Evaluator of Multiclass Classification Models</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-RegressionEvaluator.html">RegressionEvaluator&#8201;&#8212;&#8201;Evaluator of Regression Models</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-CrossValidator.html">CrossValidator&#8201;&#8212;&#8201;Model Tuning / Finding The Best Model</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-CrossValidatorModel.html">CrossValidatorModel</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-ParamGridBuilder.html">ParamGridBuilder</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-CrossValidator-example.html">CrossValidator with Pipeline Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-Params.html">Params and ParamMaps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-ValidatorParams.html">ValidatorParams</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../spark-mllib/spark-mllib-HasParallelism.html">HasParallelism</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-pipelines-persistence.html">ML Persistence&#8201;&#8212;&#8201;Saving and Loading Models and Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-MLWritable.html">MLWritable</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-MLReader.html">MLReader</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-pipelines-example-classification.html">Example&#8201;&#8212;&#8201;Text Classification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-pipelines-example-regression.html">Example&#8201;&#8212;&#8201;Linear Regression</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-logistic-regression.html">Logistic Regression</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-LogisticRegression.html">LogisticRegression</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-latent-dirichlet-allocation.html">Latent Dirichlet Allocation (LDA)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-vector.html">Vector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-labeledpoint.html">LabeledPoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-streaming.html">Streaming MLlib</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-GeneralizedLinearRegression.html">GeneralizedLinearRegression</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-mllib/spark-mllib-alternating-least-squares.html">Alternating Least Squares (ALS) Matrix Factorization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-ALS.html">ALS&#8201;&#8212;&#8201;Estimator for ALSModel</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-ALSModel.html">ALSModel&#8201;&#8212;&#8201;Model for Predictions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-mllib/spark-mllib-ALSModelReader.html">ALSModelReader</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-Instrumentation.html">Instrumentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-mllib/spark-mllib-MLUtils.html">MLUtils</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-history-server/index.html">Spark History Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration-properties.html">Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-history-server/HistoryServer.html">HistoryServer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-history-server/EventLoggingListener.html">EventLoggingListener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-history-server/SQLHistoryListener.html">SQLHistoryListener</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-history-server/ApplicationHistoryProvider.html">ApplicationHistoryProvider</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-history-server/FsHistoryProvider.html">FsHistoryProvider</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-history-server/HistoryServerArguments.html">HistoryServerArguments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-history-server/ApplicationCacheOperations.html">ApplicationCacheOperations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-history-server/ApplicationCache.html">ApplicationCache</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-local/index.html">Spark local</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-local/spark-LocalSchedulerBackend.html">LocalSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-local/spark-LocalEndpoint.html">LocalEndpoint&#8201;&#8212;&#8201;RPC Endpoint for LocalSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-local/spark-LauncherBackend.html">LauncherBackend</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Spark on YARN</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-YarnShuffleService.html">YarnShuffleService&#8201;&#8212;&#8201;ExternalShuffleService on YARN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-ExecutorRunnable.html">ExecutorRunnable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-client.html">Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-yarnrmclient.html">YarnRMClient</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-yarn-applicationmaster.html">ApplicationMaster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-AMEndpoint.html">AMEndpoint&#8201;&#8212;&#8201;ApplicationMaster RPC Endpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-YarnClusterManager.html">YarnClusterManager&#8201;&#8212;&#8201;ExternalClusterManager for YARN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-yarn-taskschedulers.html">TaskSchedulers for YARN</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-yarnscheduler.html">YarnScheduler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-yarnclusterscheduler.html">YarnClusterScheduler</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-yarn-schedulerbackends.html">SchedulerBackends for YARN</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-yarnschedulerbackend.html">YarnSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-client-yarnclientschedulerbackend.html">YarnClientSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-cluster-yarnclusterschedulerbackend.html">YarnClusterSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-cluster-YarnSchedulerEndpoint.html">YarnSchedulerEndpoint RPC Endpoint</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="spark-yarn-YarnAllocator.html">YarnAllocator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-introduction.html">Introduction to Hadoop YARN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-cluster-setup.html">Setting up YARN Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="spark-yarn-kerberos.html">Kerberos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="spark-yarn-ConfigurableCredentialManager.html">ConfigurableCredentialManager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-ClientDistributedCacheManager.html">ClientDistributedCacheManager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-YarnSparkHadoopUtil.html">YarnSparkHadoopUtil</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="spark-yarn-settings.html">Settings</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-standalone/index.html">Spark Standalone</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-Master.html">Standalone Master&#8201;&#8212;&#8201;Cluster Manager of Spark Standalone</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-worker.html">Standalone Worker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-standalone/spark-standalone-webui.html">web UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spark-standalone/spark-standalone-webui-ApplicationPage.html">ApplicationPage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-LocalSparkCluster.html">LocalSparkCluster&#8201;&#8212;&#8201;Single-JVM Spark Standalone Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-submission-gateways.html">Submission Gateways</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-master-scripts.html">Management Scripts for Standalone Master</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-worker-scripts.html">Management Scripts for Standalone Workers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-status.html">Checking Status</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-example-2-workers-on-1-node-cluster.html">Example 2-workers-on-1-node Standalone Cluster (one executor per worker)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-standalone/spark-standalone-StandaloneSchedulerBackend.html">StandaloneSchedulerBackend</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rest-api/index.html">Status REST API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rest-api/spark-api-ApiRootResource.html">ApiRootResource&#8201;&#8212;&#8201;/api/v1 URI Handler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rest-api/spark-api-ApplicationListResource.html">ApplicationListResource&#8201;&#8212;&#8201;applications URI Handler</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rest-api/spark-api-OneApplicationResource.html">OneApplicationResource&#8201;&#8212;&#8201;applications/appId URI Handler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../rest-api/spark-api-StagesResource.html">StagesResource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rest-api/spark-api-OneApplicationAttemptResource.html">OneApplicationAttemptResource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rest-api/spark-api-AbstractApplicationResource.html">AbstractApplicationResource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rest-api/spark-api-BaseAppResource.html">BaseAppResource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rest-api/spark-api-ApiRequestContext.html">ApiRequestContext</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rest-api/spark-api-UIRoot.html">UIRoot&#8201;&#8212;&#8201;Contract for Root Contrainers of Application UI Information</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rest-api/spark-api-UIRootFromServletContext.html">UIRootFromServletContext</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../spark-on-mesos/index.html">Spark on Mesos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-on-mesos/spark-mesos-MesosCoarseGrainedSchedulerBackend.html">MesosCoarseGrainedSchedulerBackend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-on-mesos/spark-mesos-introduction.html">About Mesos</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../spark-on-mesos/spark-executor-backends-MesosExecutorBackend.html">MesosExecutorBackend</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Exercises</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-pairrddfunctions-oneliners.html">One-liners using PairRDDFunctions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-take-multiple-jobs.html">Learning Jobs and Partitions Using take Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-standalone-master-ha.html">Spark Standalone - Using ZooKeeper for High-Availability of Master</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-hello-world-using-spark-shell.html">Spark&#8217;s Hello World using Spark shell and Scala</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-examples-wordcount-spark-shell.html">WordCount using Spark shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-first-app.html">Your first complete Spark application (using Scala and sbt)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-sql-hive-orc-example.html">Using Spark SQL to update data in Hive using ORC files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-custom-scheduler-listener.html">Developing Custom SparkListener to monitor DAGScheduler in Scala</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-custom-rdd.html">Developing Custom RDD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-dataframe-jdbc-postgresql.html">Working with Datasets from JDBC Data Sources (and PostgreSQL)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exercises/spark-exercise-failing-stage.html">Causing Stage to Fail</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Apache Spark</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Apache Spark</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Apache Spark</a></li>
    <li><a href="index.html">Spark on YARN</a></li>
    <li><a href="spark-yarn-YarnAllocator.html">YarnAllocator</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/alex/Alex/_Code/GitBook/mastering-apache-spark-book-cn/modules/spark-on-yarn/pages/spark-yarn-YarnAllocator.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="yarnallocatoryarn-resource-container-allocator"><a class="anchor" href="#yarnallocatoryarn-resource-container-allocator"></a><a class="link" href="#yarnallocatoryarn-resource-container-allocator"><a id="YarnAllocator"></a> YarnAllocator&#8201;&#8212;&#8201;YARN Resource Container Allocator</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>YarnAllocator</code> <a href="#updateResourceRequests">requests resources from a YARN cluster</a> (in a form of containers from YARN ResourceManager) and manages the container allocations by <a href="#allocateResources">allocating them to Spark executors</a> and <a href="#internalReleaseContainer">releasing them</a> when no longer needed by a Spark application.</p>
</div>
<div class="paragraph">
<p><code>YarnAllocator</code> manages resources using <a href="#amClient">AMRMClient</a> (that <a href="spark-yarn-yarnrmclient.adoc#register"><code>YarnRMClient</code> passes in</a> when <a href="#creating-instance">creating a <code>YarnAllocator</code></a>).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/spark-yarn-YarnAllocator-amClient-ResourceManager.png" alt="spark yarn YarnAllocator amClient ResourceManager">
</div>
<div class="title">Figure 1. Creating YarnAllocator</div>
</div>
<div class="paragraph">
<p><code>YarnAllocator</code> is part of the internal state of <a href="spark-yarn-applicationmaster.adoc#allocator">ApplicationMaster</a> (via the internal <code>allocator</code> reference).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/spark-yarn-YarnAllocator.png" alt="spark yarn YarnAllocator">
</div>
<div class="title">Figure 2. ApplicationMaster uses YarnAllocator (via allocator attribute)</div>
</div>
<div class="paragraph">
<p><code>YarnAllocator</code> later <a href="#runAllocatedContainers">launches Spark executors in allocated YARN resource containers</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/spark-yarn-YarnAllocator-runAllocatedContainers.png" alt="spark yarn YarnAllocator runAllocatedContainers">
</div>
<div class="title">Figure 3. YarnAllocator Runs ExecutorRunnables in Allocated YARN Containers</div>
</div>
<table id="internal-registries" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. YarnAllocator&#8217;s Internal Registries and Counters</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="resource"></a> <code>resource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The YARN <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Resource.html">Resource</a> that sets capacity requirement (i.e. memory and virtual cores) of a single executor.</p>
<p class="tableblock">NOTE: <code>Resource</code> models a set of computer resources in the cluster. Currently both memory and virtual CPU cores (vcores).</p>
<p class="tableblock">Created when <a href="#creating-instance"><code>YarnAllocator</code> is created</a> and is the sum of <a href="#executorMemory">executorMemory</a> and <a href="#memoryOverhead">memoryOverhead</a> for the amount of memory and <a href="#executorCores">executorCores</a> for the number of virtual cores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="executorIdCounter"></a> <code>executorIdCounter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to set executor id when <a href="#runAllocatedContainers">launching Spark executors in allocated YARN resource containers</a>.</p>
<p class="tableblock">Set to the <a href="spark-yarn-cluster-YarnSchedulerEndpoint.adoc#RetrieveLastAllocatedExecutorId">last allocated executor id</a> (received through a RPC system when <a href="#creating-instance"><code>YarnAllocator</code> is created</a>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="targetNumExecutors"></a> <code>targetNumExecutors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current desired total number of executors (as YARN resource containers).</p>
<p class="tableblock">Set to the <a href="spark-yarn-YarnSparkHadoopUtil.adoc#getInitialTargetExecutorNumber">initial number of executors</a> when <a href="#creating-instance"><code>YarnAllocator</code> is created</a>.</p>
<p class="tableblock"><code>targetNumExecutors</code> is eventually reached after <a href="#updateResourceRequests"><code>YarnAllocator</code> updates YARN container allocation requests</a>.</p>
<p class="tableblock">May later be changed when <a href="#requestTotalExecutorsWithPreferredLocalities"><code>YarnAllocator</code> is requested for total number of executors given locality preferences</a>.</p>
<p class="tableblock">Used when <a href="#updateResourceRequests">requesting missing resource containers</a> and <a href="#runAllocatedContainers">launching Spark executors in the allocated resource containers</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="numExecutorsRunning"></a> <code>numExecutorsRunning</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current number of&#8230;&#8203;FIXME</p>
<p class="tableblock">Used to <a href="#updateResourceRequests">update YARN container allocation requests</a> and <a href="#getNumExecutorsRunning">get the current number of executors running</a>.</p>
<p class="tableblock">Incremented when <a href="#runAllocatedContainers">launching Spark executors in allocated YARN resource containers</a> and decremented when <a href="#killExecutor">releasing a resource container for a Spark executor</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="currentNodeBlacklist"></a> <code>currentNodeBlacklist</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of&#8230;&#8203;FIXME</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="releasedContainers"></a> <code>releasedContainers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unneeded containers that are of no use anymore by their globally unique identifier <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/ContainerId.html">ContainerId</a> (for a <code>Container</code> in the cluster).</p>
<p class="tableblock">NOTE: Hadoop YARN&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Container.html">Container</a> represents an allocated resource in the cluster. The YARN ResourceManager is the sole authority to allocate any <code>Container</code> to applications. The allocated <code>Container</code> is always on a single node and has a unique <code>ContainerId</code>. It has a specific amount of <code>Resource</code> allocated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="allocatedHostToContainersMap"></a> <code>allocatedHostToContainersMap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lookup table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="allocatedContainerToHostMap"></a> <code>allocatedContainerToHostMap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lookup Table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="pendingLossReasonRequests"></a> <code>pendingLossReasonRequests</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="releasedExecutorLossReasons"></a> <code>releasedExecutorLossReasons</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="executorIdToContainer"></a> <code>executorIdToContainer</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="numUnexpectedContainerRelease"></a> <code>numUnexpectedContainerRelease</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="containerIdToExecutorId"></a> <code>containerIdToExecutorId</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="hostToLocalTaskCounts"></a> <code>hostToLocalTaskCounts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lookup table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="failedExecutorsTimeStamps"></a> <code>failedExecutorsTimeStamps</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="executorMemory"></a> <code>executorMemory</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="memoryOverhead"></a> <code>memoryOverhead</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="executorCores"></a> <code>executorCores</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="launchContainers"></a> <code>launchContainers</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="labelExpression"></a> <code>labelExpression</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="nodeLabelConstructor"></a> <code>nodeLabelConstructor</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="containerPlacementStrategy"></a> <code>containerPlacementStrategy</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="launcherPool"></a> <code>launcherPool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ContainerLauncher Thread Pool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="numLocalityAwareTasks"></a> <code>numLocalityAwareTasks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of locality-aware tasks to be used as container placement hint when <a href="#requestTotalExecutorsWithPreferredLocalities"><code>YarnAllocator</code> is requested for executors given locality preferences</a>.</p>
<p class="tableblock">Set to <code>0</code> when <a href="#creating-instance"><code>YarnAllocator</code> is created</a>.</p>
<p class="tableblock">Used as an input to <code>containerPlacementStrategy.localityOfRequestedContainers</code> when <a href="#updateResourceRequests"><code>YarnAllocator</code> updates YARN container allocation requests</a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Enable <code>INFO</code> or <code>DEBUG</code> logging level for <code>org.apache.spark.deploy.yarn.YarnAllocator</code> logger to see what happens inside.</p>
</div>
<div class="paragraph">
<p>Add the following line to <code>conf/log4j.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>log4j.logger.org.apache.spark.deploy.yarn.YarnAllocator=DEBUG</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to <a href="../spark-logging.adoc">Logging</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="creating-yarnallocator-instance"><a class="anchor" href="#creating-yarnallocator-instance"></a><a class="link" href="#creating-yarnallocator-instance"><a id="creating-instance"></a> Creating YarnAllocator Instance</a></h3>
<div class="paragraph">
<p><code>YarnAllocator</code> takes the following when created:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>driverUrl</code></p>
</li>
<li>
<p><code>driverRef</code>&#8201;&#8212;&#8201;<a href="../rpc/RpcEndpointRef.html" class="page">RpcEndpointRef</a> to the driver&#8217;s FIXME</p>
</li>
<li>
<p><a id="conf"></a> <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/conf/YarnConfiguration.html">YarnConfiguration</a></p>
</li>
<li>
<p><code>sparkConf</code>&#8201;&#8212;&#8201;<a href="../SparkConf.adoc">SparkConf</a></p>
</li>
<li>
<p><a id="amClient"></a> <code>amClient</code> <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html">AMRMClient</a> for <code>ContainerRequest</code></p>
</li>
<li>
<p><code>ApplicationAttemptId</code></p>
</li>
<li>
<p><a id="securityMgr"></a> <code>SecurityManager</code></p>
</li>
<li>
<p><a id="localResources"></a> <code>localResources</code>&#8201;&#8212;&#8201;<code>Map[String, LocalResource]</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All the input parameters for <code>YarnAllocator</code> (but <code>appAttemptId</code> and <code>amClient</code>) are passed directly from the input parameters of <code>YarnRMClient</code>.</p>
</div>
<div class="paragraph">
<p><code>YarnAllocator</code> sets the <code>org.apache.hadoop.yarn.util.RackResolver</code> logger to <code>WARN</code> (unless set to some log level already).</p>
</div>
<div class="paragraph">
<p><code>YarnAllocator</code> initializes the <a href="#internal-registries">internal registries and counters</a>.</p>
</div>
<div class="paragraph">
<p>It sets the following internal counters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>numExecutorsRunning</code> to <code>0</code></p>
</li>
<li>
<p><code>numUnexpectedContainerRelease</code> to <code>0L</code></p>
</li>
<li>
<p><code>numLocalityAwareTasks</code> to <code>0</code></p>
</li>
<li>
<p><code>targetNumExecutors</code> to <a href="spark-yarn-YarnSparkHadoopUtil.adoc#getInitialTargetExecutorNumber">the initial number of executors</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It creates an empty <a href="#failedExecutorsTimeStamps">queue of failed executors</a>.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>executorFailuresValidityInterval</code> to <a href="spark-yarn-settings.adoc#spark.yarn.executor.failuresValidityInterval">spark.yarn.executor.failuresValidityInterval</a>.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>executorMemory</code> to <a href="../executor/Executor.html#spark.executor.memory" class="page">spark.executor.memory</a>.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>memoryOverhead</code> to <a href="spark-yarn-settings.adoc#spark.yarn.executor.memoryOverhead">spark.yarn.executor.memoryOverhead</a>. If unavailable, it is set to the maximum of 10% of <code>executorMemory</code> and <code>384</code>.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>executorCores</code> to <a href="../executor/Executor.html#spark.executor.cores" class="page">spark.executor.cores</a>.</p>
</div>
<div class="paragraph">
<p>It creates the internal <code>resource</code> to Hadoop YARN&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Resource.html">Resource</a> with both <code>executorMemory + memoryOverhead</code> memory and <code>executorCores</code> CPU cores.</p>
</div>
<div class="paragraph">
<p>It creates the internal <code>launcherPool</code> called <strong>ContainerLauncher</strong> with maximum <a href="spark-yarn-settings.adoc#spark.yarn.containerLauncherMaxThreads">spark.yarn.containerLauncherMaxThreads</a> threads.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>launchContainers</code> to <a href="spark-yarn-settings.adoc#spark.yarn.launchContainers">spark.yarn.launchContainers</a>.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>labelExpression</code> to <a href="spark-yarn-settings.adoc#spark.yarn.executor.nodeLabelExpression">spark.yarn.executor.nodeLabelExpression</a>.</p>
</div>
<div class="paragraph">
<p>It sets the internal <code>nodeLabelConstructor</code> to&#8230;&#8203;FIXME</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME nodeLabelConstructor?
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It sets the internal <code>containerPlacementStrategy</code> to&#8230;&#8203;FIXME</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME LocalityPreferredContainerPlacementStrategy?
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="getnumexecutorsrunning-method"><a class="anchor" href="#getnumexecutorsrunning-method"></a><a class="link" href="#getnumexecutorsrunning-method"><a id="getNumExecutorsRunning"></a> <code>getNumExecutorsRunning</code> Method</a></h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="updateinternalstate-method"><a class="anchor" href="#updateinternalstate-method"></a><a class="link" href="#updateinternalstate-method"><a id="updateInternalState"></a> <code>updateInternalState</code> Method</a></h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="killexecutor-method"><a class="anchor" href="#killexecutor-method"></a><a class="link" href="#killexecutor-method"><a id="killExecutor"></a> <code>killExecutor</code> Method</a></h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="specifying-current-total-number-of-executors-with-locality-preferencesrequesttotalexecutorswithpreferredlocalities-method"><a class="anchor" href="#specifying-current-total-number-of-executors-with-locality-preferencesrequesttotalexecutorswithpreferredlocalities-method"></a><a class="link" href="#specifying-current-total-number-of-executors-with-locality-preferencesrequesttotalexecutorswithpreferredlocalities-method"><a id="requestTotalExecutorsWithPreferredLocalities"></a> Specifying Current Total Number of Executors with Locality Preferences&#8201;&#8212;&#8201;<code>requestTotalExecutorsWithPreferredLocalities</code> Method</a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">requestTotalExecutorsWithPreferredLocalities(
  requestedTotal: Int,
  localityAwareTasks: Int,
  hostToLocalTaskCount: Map[String, Int],
  nodeBlacklist: Set[String]): Boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>requestTotalExecutorsWithPreferredLocalities</code> returns whether the <a href="#targetNumExecutors">current desired total number of executors</a> is different than the input <code>requestedTotal</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>requestTotalExecutorsWithPreferredLocalities</code> should instead have been called <code>shouldRequestTotalExecutorsWithPreferredLocalities</code> since it answers the question whether to request new total executors or not.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>requestTotalExecutorsWithPreferredLocalities</code> sets the internal <a href="#numLocalityAwareTasks">numLocalityAwareTasks</a> and <a href="#hostToLocalTaskCounts">hostToLocalTaskCounts</a> attributes to the input <code>localityAwareTasks</code> and <code>hostToLocalTaskCount</code> arguments, respectively.</p>
</div>
<div class="paragraph">
<p>If the input <code>requestedTotal</code> is different than the internal <a href="#targetNumExecutors">targetNumExecutors</a> you should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO YarnAllocator: Driver requested a total number of [requestedTotal] executor(s).</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>requestTotalExecutorsWithPreferredLocalities</code> saves the input <code>requestedTotal</code> to be the <a href="#targetNumExecutors">current desired total number of executors</a>.</p>
</div>
<div class="paragraph">
<p><code>requestTotalExecutorsWithPreferredLocalities</code> updates blacklist information to YARN ResouceManager for this application in order to avoid allocating new Containers on the problematic nodes.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Describe the blacklisting
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>requestTotalExecutorsWithPreferredLocalities</code> is executed in response to <a href="spark-yarn-AMEndpoint.adoc#RequestExecutors"><code>RequestExecutors</code> message to <code>ApplicationMaster</code></a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="adding-or-removing-container-requests-to-launch-executorsupdateresourcerequests-method"><a class="anchor" href="#adding-or-removing-container-requests-to-launch-executorsupdateresourcerequests-method"></a><a class="link" href="#adding-or-removing-container-requests-to-launch-executorsupdateresourcerequests-method"><a id="updateResourceRequests"></a> Adding or Removing Container Requests to Launch Executors&#8201;&#8212;&#8201;<code>updateResourceRequests</code> Method</a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">updateResourceRequests(): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>updateResourceRequests</code> <a href="#updateResourceRequests-missing-executors">requests new</a> or <a href="#updateResourceRequests-cancelling-executor-allocations">cancels outstanding</a> executor containers from the <a href="spark-yarn-introduction.adoc#ResourceManager">YARN ResourceManager</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In YARN, you have to request containers for resources first (using <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#addContainerRequest(T)">AMRMClient.addContainerRequest</a>) before calling <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#allocate(float)">AMRMClient.allocate</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It gets the list of outstanding YARN&#8217;s <code>ContainerRequests</code> (using the constructor&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#getMatchingRequests(org.apache.hadoop.yarn.api.records.Priority, java.lang.String, org.apache.hadoop.yarn.api.records.Resource)">AMRMClient[ContainerRequest]</a>) and aligns their number to current workload.</p>
</div>
<div class="paragraph">
<p><code>updateResourceRequests</code> consists of two main branches:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#updateResourceRequests-missing-executors">missing executors</a>, i.e. when the number of executors allocated already or pending does not match the needs and so there are missing executors.</p>
</li>
<li>
<p><a href="#updateResourceRequests-cancelling-executor-allocations">executors to cancel</a>, i.e. when the number of pending executor allocations is positive, but the number of all the executors is more than Spark needs.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>updateResourceRequests</code> is used when <code>YarnAllocator</code> <a href="#allocateResources">requests new resource containers</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="case-1-missing-executors"><a class="anchor" href="#case-1-missing-executors"></a><a class="link" href="#case-1-missing-executors"><a id="updateResourceRequests-missing-executors"></a> Case 1. Missing Executors</a></h4>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO YarnAllocator: Will request [count] executor containers, each with [vCores] cores and [memory] MB memory including [memoryOverhead] MB overhead</code></pre>
</div>
</div>
<div class="paragraph">
<p>It then splits pending container allocation requests per locality preference of pending tasks (in the internal <a href="#hostToLocalTaskCounts">hostToLocalTaskCounts</a> registry).</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Review <code>splitPendingAllocationsByLocality</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It removes stale container allocation requests (using YARN&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#removeContainerRequest(T)">AMRMClient.removeContainerRequest</a>).</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Stale?
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO YarnAllocator: Canceled [cancelledContainers] container requests (locality no longer needed)</code></pre>
</div>
</div>
<div class="paragraph">
<p>It computes locality of requested containers (based on the internal <a href="#numLocalityAwareTasks">numLocalityAwareTasks</a>, <a href="#hostToLocalTaskCounts">hostToLocalTaskCounts</a> and <a href="#allocatedHostToContainersMap">allocatedHostToContainersMap</a> lookup table).</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME Review <code>containerPlacementStrategy.localityOfRequestedContainers</code> + the code that follows.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For any new container needed <code>updateResourceRequests</code> adds a container request (using YARN&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#addContainerRequest(T)">AMRMClient.addContainerRequest</a>).</p>
</div>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO YarnAllocator: Submitted container request (host: [host], capability: [resource])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="case-2-cancelling-pending-executor-allocations"><a class="anchor" href="#case-2-cancelling-pending-executor-allocations"></a><a class="link" href="#case-2-cancelling-pending-executor-allocations"><a id="updateResourceRequests-cancelling-executor-allocations"></a> Case 2. Cancelling Pending Executor Allocations</a></h4>
<div class="paragraph">
<p>When there are executors to cancel (case 2.), you should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO Canceling requests for [numToCancel] executor container(s) to have a new desired total [targetNumExecutors] executors.</code></pre>
</div>
</div>
<div class="paragraph">
<p>It checks whether there are pending allocation requests and removes the excess (using YARN&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#removeContainerRequest(T)">AMRMClient.removeContainerRequest</a>). If there are no pending allocation requests, you should see the WARN message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>WARN Expected to find pending requests, but found none.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="handling-allocated-containers-for-executorshandleallocatedcontainers-internal-method"><a class="anchor" href="#handling-allocated-containers-for-executorshandleallocatedcontainers-internal-method"></a><a class="link" href="#handling-allocated-containers-for-executorshandleallocatedcontainers-internal-method"><a id="handleAllocatedContainers"></a> Handling Allocated Containers for Executors&#8201;&#8212;&#8201;<code>handleAllocatedContainers</code> Internal Method</a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">handleAllocatedContainers(allocatedContainers: Seq[Container]): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>handleAllocatedContainers</code> handles allocated YARN containers, i.e. runs Spark executors on matched containers or releases unneeded containers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A YARN <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Container.html">Container</a> represents an allocated resource in the cluster. The allocated <code>Container</code> is always on a single node and has a unique <code>ContainerId</code>. It has a specific amount of <code>Resource</code> allocated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Internally, <code>handleAllocatedContainers</code> <a href="#matchContainerToRequest">matches requests to host, rack, and any host (a container allocation)</a>.</p>
</div>
<div class="paragraph">
<p>If <code>handleAllocatedContainers</code> did not manage to allocate some containers, you should see the following DEBUG message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>DEBUG Releasing [size] unneeded containers that were allocated to us</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>handleAllocatedContainers</code> <a href="#internalReleaseContainer">releases the unneeded containers</a> (if there are any).</p>
</div>
<div class="paragraph">
<p><code>handleAllocatedContainers</code> <a href="#runAllocatedContainers">runs the allocated and matched containers</a>.</p>
</div>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO Received [allocatedContainersSize] containers from YARN, launching executors on [containersToUseSize] of them.</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>handleAllocatedContainers</code> is used exclusively when <code>YarnAllocator</code> <a href="#allocateResources">allocates YARN resource containers for Spark executors</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="running-executorrunnables-with-coarsegrainedexecutorbackends-in-allocated-yarn-resource-containersrunallocatedcontainers-internal-method"><a class="anchor" href="#running-executorrunnables-with-coarsegrainedexecutorbackends-in-allocated-yarn-resource-containersrunallocatedcontainers-internal-method"></a><a class="link" href="#running-executorrunnables-with-coarsegrainedexecutorbackends-in-allocated-yarn-resource-containersrunallocatedcontainers-internal-method"><a id="runAllocatedContainers"></a> Running ExecutorRunnables (with CoarseGrainedExecutorBackends) in Allocated YARN Resource Containers&#8201;&#8212;&#8201;<code>runAllocatedContainers</code> Internal Method</a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">runAllocatedContainers(containersToUse: ArrayBuffer[Container]): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>runAllocatedContainers</code> traverses the YARN <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Container.html">Container</a> collection (as the input <code>containersToUse</code>) and schedules execution of <a href="spark-yarn-ExecutorRunnable.adoc">ExecutorRunnables</a> per YARN container on <a href="#launcherPool"><code>ContainerLauncher</code> thread pool</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/spark-yarn-YarnAllocator-runAllocatedContainers.png" alt="spark yarn YarnAllocator runAllocatedContainers">
</div>
<div class="title">Figure 4. YarnAllocator Runs ExecutorRunnables in Allocated YARN Containers</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Container.html">Container</a> in YARN represents allocated resources (memory and cores) in the cluster.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Internally, <code>runAllocatedContainers</code> increments <a href="#executorIdCounter">executorIdCounter</a> internal counter.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>runAllocatedContainers</code> asserts that the amount of memory of a container not less than the <a href="#resource">requested memory for executors</a>. And only memory!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO YarnAllocator: Launching container [containerId] for on host [executorHostname]</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>runAllocatedContainers</code> checks if the <a href="#numExecutorsRunning">number of executors running</a> is less than the <a href="#targetNumExecutors">number of required executors</a>.</p>
</div>
<div class="paragraph">
<p>If there are executors still missing (and <code>runAllocatedContainers</code> is not in <a href="#launchContainers">testing mode</a>), <code>runAllocatedContainers</code> schedules execution of a <a href="spark-yarn-ExecutorRunnable.adoc">ExecutorRunnable</a> on <a href="#launcherPool"><code>ContainerLauncher</code> thread pool</a> and <a href="#updateInternalState">updates internal state</a>. When executing a <code>ExecutorRunnable</code> <code>runAllocatedContainers</code> first <a href="spark-yarn-ExecutorRunnable.adoc#creating-instance">creates a <code>ExecutorRunnable</code></a> and <a href="spark-yarn-ExecutorRunnable.adoc#run">starts it</a>.</p>
</div>
<div class="paragraph">
<p>When <code>runAllocatedContainers</code> catches a non-fatal exception and you should see the following ERROR message in the logs and immediately <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#releaseAssignedContainer(org.apache.hadoop.yarn.api.records.ContainerId)">releases the container</a> (using the internal <a href="#amClient">AMRMClient</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ERROR Failed to launch executor [executorId] on container [containerId]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>YarnAllocator</code> has reached <a href="#targetNumExecutors">target number of executors</a>, you should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO Skip launching executorRunnable as running Executors count: [numExecutorsRunning] reached target Executors count: [targetNumExecutors].</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>runAllocatedContainers</code> is used exclusively when <code>YarnAllocator</code> <a href="#handleAllocatedContainers">handles allocated YARN containers</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="releasing-yarn-containerinternalreleasecontainer-internal-procedure"><a class="anchor" href="#releasing-yarn-containerinternalreleasecontainer-internal-procedure"></a><a class="link" href="#releasing-yarn-containerinternalreleasecontainer-internal-procedure"><a id="internalReleaseContainer"></a> Releasing YARN Container&#8201;&#8212;&#8201;<code>internalReleaseContainer</code> Internal Procedure</a></h4>
<div class="paragraph">
<p>All unnecessary YARN containers (that were allocated but are either <a href="#handleAllocatedContainers">of no use</a> or <a href="#killExecutor">no longer needed</a>) are released using the internal <code>internalReleaseContainer</code> procedure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">internalReleaseContainer(container: Container): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>internalReleaseContainer</code> records <code>container</code> in the internal <a href="#releasedContainers">releasedContainers</a> registry and releases it to the <a href="spark-yarn-introduction.adoc#ResourceManager">YARN ResourceManager</a> (calling <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#releaseAssignedContainer(org.apache.hadoop.yarn.api.records.ContainerId)">AMRMClient[ContainerRequest].releaseAssignedContainer</a> using the internal <code>amClient</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="deciding-on-use-of-yarn-containermatchcontainertorequest-internal-method"><a class="anchor" href="#deciding-on-use-of-yarn-containermatchcontainertorequest-internal-method"></a><a class="link" href="#deciding-on-use-of-yarn-containermatchcontainertorequest-internal-method"><a id="matchContainerToRequest"></a> Deciding on Use of YARN Container&#8201;&#8212;&#8201;<code>matchContainerToRequest</code> Internal Method</a></h4>
<div class="paragraph">
<p>When <a href="#handleAllocatedContainers"><code>handleAllocatedContainers</code> handles allocated containers for executors</a>, it uses <code>matchContainerToRequest</code> to match the containers to <code>ContainerRequests</code> (and hence to workload and location preferences).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">matchContainerToRequest(
  allocatedContainer: Container,
  location: String,
  containersToUse: ArrayBuffer[Container],
  remaining: ArrayBuffer[Container]): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>matchContainerToRequest</code> puts <code>allocatedContainer</code> in <code>containersToUse</code> or <code>remaining</code> collections per available outstanding <code>ContainerRequests</code> that match the priority of the input <code>allocatedContainer</code>, the input <code>location</code>, and the memory and vcore capabilities for Spark executors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The input <code>location</code> can be host, rack, or <code>*</code> (star), i.e. any host.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#getMatchingRequests(org.apache.hadoop.yarn.api.records.Priority, java.lang.String, org.apache.hadoop.yarn.api.records.Resource)">gets the outstanding <code>ContainerRequests</code></a> (from the <a href="spark-yarn-introduction.adoc#ResourceManager">YARN ResourceManager</a>).</p>
</div>
<div class="paragraph">
<p>If there are any outstanding <code>ContainerRequests</code> that meet the requirements, it simply takes the first one and puts it in the input <code>containersToUse</code> collection. It also removes the <code>ContainerRequest</code> so it is not submitted again (it uses the internal <code>AMRMClient[ContainerRequest]</code>).</p>
</div>
<div class="paragraph">
<p>Otherwise, it puts the input <code>allocatedContainer</code> in the input <code>remaining</code> collection.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="processcompletedcontainers-method"><a class="anchor" href="#processcompletedcontainers-method"></a><a class="link" href="#processcompletedcontainers-method"><a id="processCompletedContainers"></a> <code>processCompletedContainers</code> Method</a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">processCompletedContainers(completedContainers: Seq[ContainerStatus]): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>processCompletedContainers</code> accepts a collection of YARN&#8217;s <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/ContainerStatus.html">ContainerStatus</a>'es.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>ContainerStatus</code> represents the current status of a YARN <code>Container</code> and provides details such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Id</p>
</li>
<li>
<p>State</p>
</li>
<li>
<p>Exit status of a completed container.</p>
</li>
<li>
<p>Diagnostic message for a failed container.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For each completed container in the collection, <code>processCompletedContainers</code> removes it from the internal <a href="#releasedContainers">releasedContainers</a> registry.</p>
</div>
<div class="paragraph">
<p>It looks the host of the container up (in the internal <a href="#allocatedContainerToHostMap">allocatedContainerToHostMap</a> lookup table). The host may or may not exist in the lookup table.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
FIXME The host may or may not exist in the lookup table?
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>ExecutorExited</code> exit reason is computed.</p>
</div>
<div class="paragraph">
<p>When the host of the completed container has been found, the internal <a href="#numExecutorsRunning">numExecutorsRunning</a> counter is decremented.</p>
</div>
<div class="paragraph">
<p>You should see the following INFO message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO Completed container [containerId] [host] (state: [containerState], exit status: [containerExitStatus])</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <code>ContainerExitStatus.SUCCESS</code> and <code>ContainerExitStatus.PREEMPTED</code> exit statuses of the container (which are not considered application failures), you should see one of the two possible INFO messages in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO Executor for container [id] exited because of a YARN event (e.g., pre-emption) and not because of an error in the running job.</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>INFO Container [id] [host] was preempted.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other exit statuses of the container are considered application failures and reported as a WARN message in the logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>WARN Container killed by YARN for exceeding memory limits. [diagnostics] Consider boosting spark.yarn.executor.memoryOverhead.</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>WARN Container marked as failed: [id] [host]. Exit status: [containerExitStatus]. Diagnostics: [containerDiagnostics]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The host is looked up in the internal <a href="#allocatedHostToContainersMap">allocatedHostToContainersMap</a> lookup table. If found, the container is removed from the containers registered for the host or the host itself is removed from the lookup table when this container was the last on the host.</p>
</div>
<div class="paragraph">
<p>The container is removed from the internal <a href="#allocatedContainerToHostMap">allocatedContainerToHostMap</a> lookup table.</p>
</div>
<div class="paragraph">
<p>The container is removed from the internal <a href="#containerIdToExecutorId">containerIdToExecutorId</a> translation table. If an executor is found, it is removed from the internal <a href="#executorIdToContainer">executorIdToContainer</a> translation table.</p>
</div>
<div class="paragraph">
<p>If the executor was recorded in the internal <a href="#pendingLossReasonRequests">pendingLossReasonRequests</a> lookup table, the exit reason (as calculated earlier as <code>ExecutorExited</code>) is sent back for every pending RPC message recorded.</p>
</div>
<div class="paragraph">
<p>If no executor was found, the executor and the exit reason are recorded in the internal <a href="#releasedExecutorLossReasons">releasedExecutorLossReasons</a> lookup table.</p>
</div>
<div class="paragraph">
<p>In case the container was not in the internal <a href="#releasedContainers">releasedContainers</a> registry, the internal <a href="#numUnexpectedContainerRelease">numUnexpectedContainerRelease</a> counter is increased and a <code>RemoveExecutor</code> RPC message is sent to the driver (as specified when <a href="#creating-instance"><code>YarnAllocator</code> was created</a>) to notify about the failure of the executor.</p>
</div>
</div>
<div class="sect2">
<h3 id="requesting-and-allocating-yarn-resource-containers-to-spark-executors-and-cancelling-outstanding-containersallocateresources-method"><a class="anchor" href="#requesting-and-allocating-yarn-resource-containers-to-spark-executors-and-cancelling-outstanding-containersallocateresources-method"></a><a class="link" href="#requesting-and-allocating-yarn-resource-containers-to-spark-executors-and-cancelling-outstanding-containersallocateresources-method"><a id="allocateResources"></a> Requesting and Allocating YARN Resource Containers to Spark Executors (and Cancelling Outstanding Containers)&#8201;&#8212;&#8201;<code>allocateResources</code> Method</a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">allocateResources(): Unit</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>allocateResources</code> claims new resource containers from <a href="spark-yarn-introduction.adoc#ResourceManager">YARN ResourceManager</a> and cancels any outstanding resource container requests.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In YARN, you first have to submit requests for YARN resource containers to <a href="spark-yarn-introduction.adoc#ResourceManager">YARN ResourceManager</a> (using <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#addContainerRequest(T)">AMRMClient.addContainerRequest</a>) before claiming them by calling <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#allocate(float)">AMRMClient.allocate</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Internally, <code>allocateResources</code> <a href="#updateResourceRequests">submits requests for new containers and cancels previous container requests</a>.</p>
</div>
<div class="paragraph">
<p><code>allocateResources</code> then <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/client/api/AMRMClient.html#allocate(float)">claims the containers</a> (using the internal reference to YARN&#8217;s <a href="#amClient">AMRMClient</a>) with progress indicator of <code>0.1f</code>.</p>
</div>
<div class="paragraph">
<p>You can see the exact moment in the YARN console for the Spark application with the progress bar at 10%.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/spark-yarn-console-progress-10.png" alt="spark yarn console progress 10">
</div>
<div class="title">Figure 5. YARN Console after Allocating YARN Containers (Progress at 10%)</div>
</div>
<div class="paragraph">
<p><code>allocateResources</code> <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/protocolrecords/AllocateResponse.html#getAllocatedContainers()">gets the list of allocated containers</a> from the <a href="spark-yarn-introduction.adoc#ResourceManager">YARN ResourceManager</a>.</p>
</div>
<div class="paragraph">
<p>If the number of allocated containers is greater than <code>0</code>, you should see the following DEBUG message in the logs (in stderr on YARN):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>DEBUG YarnAllocator: Allocated containers: [allocatedContainersSize]. Current executor count: [numExecutorsRunning]. Cluster resources: [availableResources].</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>allocateResources</code> <a href="#handleAllocatedContainers">launches executors on the allocated YARN resource containers</a>.</p>
</div>
<div class="paragraph">
<p><code>allocateResources</code> <a href="https://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/protocolrecords/AllocateResponse.html#getCompletedContainersStatuses()">gets the list of completed containers' statuses from YARN ResourceManager</a>.</p>
</div>
<div class="paragraph">
<p>If the number of completed containers is greater than <code>0</code>, you should see the following DEBUG message in the logs (in stderr on YARN):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>DEBUG YarnAllocator: Completed [completedContainersSize] containers</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>allocateResources</code> <a href="#processCompletedContainers">processes completed containers</a>.</p>
</div>
<div class="paragraph">
<p>You should see the following DEBUG message in the logs (in stderr on YARN):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>DEBUG YarnAllocator: Finished processing [completedContainersSize] completed containers. Current running executor count: [numExecutorsRunning].</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>allocateResources</code> is used when <code>ApplicationMaster</code> <a href="spark-yarn-applicationmaster.adoc#registerAM">is registered to the YARN ResourceManager</a> and <a href="spark-yarn-applicationmaster.adoc#launchReporterThread">launches progress <code>Reporter</code> thread</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
